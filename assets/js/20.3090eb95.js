(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1254:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_1-mq介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-mq介绍"}},[t._v("#")]),t._v(" 1. MQ介绍")]),t._v(" "),s("p",[t._v("##1.1 为什么要用MQ")]),t._v(" "),s("p",[t._v("消息队列是一种“先进先出”的数据结构")]),t._v(" "),s("p",[s("img",{attrs:{src:a(972),alt:""}})]),t._v(" "),s("p",[t._v("其应用场景主要包含以下3个方面")]),t._v(" "),s("ul",[s("li",[t._v("应用解耦")])]),t._v(" "),s("p",[t._v("系统的耦合性越高，容错性就越低。以电商应用为例，用户创建订单后，如果耦合调用库存系统、物流系统、支付系统，任何一个子系统出了故障或者因为升级等原因暂时不可用，都会造成下单操作异常，影响用户使用体验。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(973),alt:""}})]),t._v(" "),s("p",[t._v("使用消息队列解耦合，系统的耦合性就会提高了。比如物流系统发生故障，需要几分钟才能来修复，在这段时间内，物流系统要处理的数据被缓存到消息队列中，用户的下单操作正常完成。当物流系统回复后，补充处理存在消息队列中的订单消息即可，终端系统感知不到物流系统发生过几分钟故障。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(974),alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("流量削峰")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(975),alt:""}})]),t._v(" "),s("p",[t._v("应用系统如果遇到系统请求流量的瞬间猛增，有可能会将系统压垮。有了消息队列可以将大量请求缓存起来，分散到很长一段时间处理，这样可以大大提到系统的稳定性和用户体验。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(976),alt:""}})]),t._v(" "),s("p",[t._v("一般情况，为了保证系统的稳定性，如果系统负载超过阈值，就会阻止用户请求，这会影响用户体验，而如果使用消息队列将请求缓存起来，等待系统处理完毕后通知用户下单完毕，这样总不能下单体验要好。")]),t._v(" "),s("p",[s("u",[t._v("处于经济考量目的：")])]),t._v(" "),s("p",[t._v("业务系统正常时段的QPS如果是1000，流量最高峰是10000，为了应对流量高峰配置高性能的服务器显然不划算，这时可以使用消息队列对峰值流量削峰")]),t._v(" "),s("ul",[s("li",[t._v("数据分发")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(977),alt:""}})]),t._v(" "),s("p",[t._v("通过消息队列可以让数据在多个系统更加之间进行流通。数据的产生方不需要关心谁来使用数据，只需要将数据发送到消息队列，数据使用方直接在消息队列中直接获取数据即可")]),t._v(" "),s("p",[s("img",{attrs:{src:a(978),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_1-2-mq的优点和缺点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-mq的优点和缺点"}},[t._v("#")]),t._v(" 1.2 MQ的优点和缺点")]),t._v(" "),s("p",[t._v("优点：解耦、削峰、数据分发")]),t._v(" "),s("p",[t._v("缺点包含以下几点：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("系统可用性降低")]),t._v(" "),s("p",[t._v("系统引入的外部依赖越多，系统稳定性越差。一旦MQ宕机，就会对业务造成影响。")]),t._v(" "),s("p",[t._v("如何保证MQ的高可用？")])]),t._v(" "),s("li",[s("p",[t._v("系统复杂度提高")]),t._v(" "),s("p",[t._v("MQ的加入大大增加了系统的复杂度，以前系统间是同步的远程调用，现在是通过MQ进行异步调用。")]),t._v(" "),s("p",[t._v("如何保证消息没有被重复消费？怎么处理消息丢失情况？那么保证消息传递的顺序性？")])]),t._v(" "),s("li",[s("p",[t._v("一致性问题")]),t._v(" "),s("p",[t._v("A系统处理完业务，通过MQ给B、C、D三个系统发消息数据，如果B系统、C系统处理成功，D系统处理失败。")]),t._v(" "),s("p",[t._v("如何保证消息数据处理的一致性？")])])]),t._v(" "),s("h2",{attrs:{id:"_1-3-各种mq产品的比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-各种mq产品的比较"}},[t._v("#")]),t._v(" 1.3 各种MQ产品的比较")]),t._v(" "),s("p",[t._v("常见的MQ产品包括Kafka、ActiveMQ、RabbitMQ、RocketMQ。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(979),alt:""}})]),t._v(" "),s("h1",{attrs:{id:"_2-rocketmq快速入门"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-rocketmq快速入门"}},[t._v("#")]),t._v(" 2. RocketMQ快速入门")]),t._v(" "),s("p",[t._v("RocketMQ是阿里巴巴2016年MQ中间件，使用Java语言开发，在阿里内部，RocketMQ承接了例如“双11”等高并发场景的消息流转，能够处理万亿级别的消息。")]),t._v(" "),s("h2",{attrs:{id:"_2-1-准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-准备工作"}},[t._v("#")]),t._v(" 2.1 准备工作")]),t._v(" "),s("h3",{attrs:{id:"_2-1-1-下载rocketmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-下载rocketmq"}},[t._v("#")]),t._v(" 2.1.1 下载RocketMQ")]),t._v(" "),s("p",[t._v("RocketMQ最新版本：4.5.1")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.5.1/rocketmq-all-4.5.1-bin-release.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_2-2-2-环境要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-环境要求"}},[t._v("#")]),t._v(" 2.2.2 环境要求")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Linux64位系统")])]),t._v(" "),s("li",[s("p",[t._v("JDK1.8(64位)")])]),t._v(" "),s("li",[s("p",[t._v("源码安装需要安装Maven 3.2.x")])])]),t._v(" "),s("h2",{attrs:{id:"_2-2-安装rocketmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-安装rocketmq"}},[t._v("#")]),t._v(" 2.2 安装RocketMQ")]),t._v(" "),s("h3",{attrs:{id:"_2-2-1-安装步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-安装步骤"}},[t._v("#")]),t._v(" 2.2.1 安装步骤")]),t._v(" "),s("p",[t._v("本教程以二进制包方式安装")]),t._v(" "),s("ol",[s("li",[t._v("解压安装包")]),t._v(" "),s("li",[t._v("进入安装目录")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-2-目录介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-目录介绍"}},[t._v("#")]),t._v(" 2.2.2 目录介绍")]),t._v(" "),s("ul",[s("li",[t._v("bin：启动脚本，包括shell脚本和CMD脚本")]),t._v(" "),s("li",[t._v("conf：实例配置文件 ，包括broker配置文件、logback配置文件等")]),t._v(" "),s("li",[t._v("lib：依赖jar包，包括Netty、commons-lang、FastJSON等")])]),t._v(" "),s("h2",{attrs:{id:"_2-3-启动rocketmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-启动rocketmq"}},[t._v("#")]),t._v(" 2.3 启动RocketMQ")]),t._v(" "),s("ol",[s("li",[t._v("启动NameServer")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.启动NameServer")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" bin/mqnamesrv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.查看启动日志")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" ~/logs/rocketmqlogs/namesrv.log\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("启动Broker")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.启动Broker")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" bin/mqbroker "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" localhost:9876 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.查看启动日志")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" ~/logs/rocketmqlogs/broker.log \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("ul",[s("li",[s("p",[t._v("问题描述：")]),t._v(" "),s("p",[t._v("RocketMQ默认的虚拟机内存较大，启动Broker如果因为内存不足失败，需要编辑如下两个配置文件，修改JVM内存大小")])])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编辑runbroker.sh和runserver.sh修改默认JVM大小")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" runbroker.sh\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" runserver.sh\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("ul",[s("li",[t._v("参考设置：")])]),t._v(" "),s("p",[s("code",[t._v('JAVA_OPT="${JAVA_OPT} -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"')])]),t._v(" "),s("h2",{attrs:{id:"_2-4-测试rocketmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-测试rocketmq"}},[t._v("#")]),t._v(" 2.4 测试RocketMQ")]),t._v(" "),s("h3",{attrs:{id:"_2-4-1-发送消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1-发送消息"}},[t._v("#")]),t._v(" 2.4.1 发送消息")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.设置环境变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NAMESRV_ADDR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("localhost:9876\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.使用安装包的Demo发送消息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" tools.sh org.apache.rocketmq.example.quickstart.Producer\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"_2-4-2-接收消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2-接收消息"}},[t._v("#")]),t._v(" 2.4.2 接收消息")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.设置环境变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NAMESRV_ADDR")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("localhost:9876\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.接收消息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" tools.sh org.apache.rocketmq.example.quickstart.Consumer\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"_2-5-关闭rocketmq"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-关闭rocketmq"}},[t._v("#")]),t._v(" 2.5 关闭RocketMQ")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.关闭NameServer")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" bin/mqshutdown namesrv\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.关闭Broker")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" bin/mqshutdown broker\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h1",{attrs:{id:"_3-rocketmq集群搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-rocketmq集群搭建"}},[t._v("#")]),t._v(" 3. RocketMQ集群搭建")]),t._v(" "),s("h2",{attrs:{id:"_3-1-各角色介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-各角色介绍"}},[t._v("#")]),t._v(" 3.1 各角色介绍")]),t._v(" "),s("ul",[s("li",[t._v("Producer：消息的发送者；举例：发信者")]),t._v(" "),s("li",[t._v("Consumer：消息接收者；举例：收信者")]),t._v(" "),s("li",[t._v("Broker：暂存和传输消息；举例：邮局")]),t._v(" "),s("li",[t._v("NameServer：管理Broker；举例：各个邮局的管理机构")]),t._v(" "),s("li",[t._v("Topic：区分消息的种类；一个发送者可以发送消息给一个或者多个Topic；一个消息的接收者可以订阅一个或者多个Topic消息")]),t._v(" "),s("li",[t._v("Message Queue：相当于是Topic的分区；用于并行发送和接收消息")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(369),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_3-2-集群搭建方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-集群搭建方式"}},[t._v("#")]),t._v(" 3.2 集群搭建方式")]),t._v(" "),s("h3",{attrs:{id:"_3-2-1-集群特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-集群特点"}},[t._v("#")]),t._v(" 3.2.1 集群特点")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("NameServer是一个几乎无状态节点，可集群部署，节点之间无任何信息同步。")])]),t._v(" "),s("li",[s("p",[t._v("Broker部署相对复杂，Broker分为Master与Slave，一个Master可以对应多个Slave，但是一个Slave只能对应一个Master，Master与Slave的对应关系通过指定相同的BrokerName，不同的BrokerId来定义，BrokerId为0表示Master，非0表示Slave。Master也可以部署多个。每个Broker与NameServer集群中的所有节点建立长连接，定时注册Topic信息到所有NameServer。")])]),t._v(" "),s("li",[s("p",[t._v("Producer与NameServer集群中的其中一个节点（随机选择）建立长连接，定期从NameServer取Topic路由信息，并向提供Topic服务的Master建立长连接，且定时向Master发送心跳。Producer完全无状态，可集群部署。")])]),t._v(" "),s("li",[s("p",[t._v("Consumer与NameServer集群中的其中一个节点（随机选择）建立长连接，定期从NameServer取Topic路由信息，并向提供Topic服务的Master、Slave建立长连接，且定时向Master、Slave发送心跳。Consumer既可以从Master订阅消息，也可以从Slave订阅消息，订阅规则由Broker配置决定。")])])]),t._v(" "),s("h3",{attrs:{id:"_3-2-3-集群模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-集群模式"}},[t._v("#")]),t._v(" 3.2.3 集群模式")]),t._v(" "),s("h4",{attrs:{id:"_1-单master模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-单master模式"}},[t._v("#")]),t._v(" 1）单Master模式")]),t._v(" "),s("p",[t._v("这种方式风险较大，一旦Broker重启或者宕机时，会导致整个服务不可用。不建议线上环境使用,可以用于本地测试。")]),t._v(" "),s("h4",{attrs:{id:"_2-多master模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-多master模式"}},[t._v("#")]),t._v(" 2）多Master模式")]),t._v(" "),s("p",[t._v("一个集群无Slave，全是Master，例如2个Master或者3个Master，这种模式的优缺点如下：")]),t._v(" "),s("ul",[s("li",[t._v("优点：配置简单，单个Master宕机或重启维护对应用无影响，在磁盘配置为RAID10时，即使机器宕机不可恢复情况下，由于RAID10磁盘非常可靠，消息也不会丢（异步刷盘丢失少量消息，同步刷盘一条不丢），性能最高；")]),t._v(" "),s("li",[t._v("缺点：单台机器宕机期间，这台机器上未被消费的消息在机器恢复之前不可订阅，消息实时性会受到影响。")])]),t._v(" "),s("h4",{attrs:{id:"_3-多master多slave模式-异步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-多master多slave模式-异步"}},[t._v("#")]),t._v(" 3）多Master多Slave模式（异步）")]),t._v(" "),s("p",[t._v("每个Master配置一个Slave，有多对Master-Slave，HA采用异步复制方式，主备有短暂消息延迟（毫秒级），这种模式的优缺点如下：")]),t._v(" "),s("ul",[s("li",[t._v("优点：即使磁盘损坏，消息丢失的非常少，且消息实时性不会受影响，同时Master宕机后，消费者仍然可以从Slave消费，而且此过程对应用透明，不需要人工干预，性能同多Master模式几乎一样；")]),t._v(" "),s("li",[t._v("缺点：Master宕机，磁盘损坏情况下会丢失少量消息。")])]),t._v(" "),s("h4",{attrs:{id:"_4-多master多slave模式-同步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-多master多slave模式-同步"}},[t._v("#")]),t._v(" 4）多Master多Slave模式（同步）")]),t._v(" "),s("p",[t._v("每个Master配置一个Slave，有多对Master-Slave，HA采用同步双写方式，即只有主备都写成功，才向应用返回成功，这种模式的优缺点如下：")]),t._v(" "),s("ul",[s("li",[t._v("优点：数据与服务都无单点故障，Master宕机情况下，消息无延迟，服务可用性与数据可用性都非常高；")]),t._v(" "),s("li",[t._v("缺点：性能比异步复制模式略低（大约低10%左右），发送单个消息的RT会略高，且目前版本在主节点宕机后，备机不能自动切换为主机。")])]),t._v(" "),s("h2",{attrs:{id:"_3-3-双主双从集群搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-双主双从集群搭建"}},[t._v("#")]),t._v(" 3.3 双主双从集群搭建")]),t._v(" "),s("h3",{attrs:{id:"_3-3-1-总体架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-总体架构"}},[t._v("#")]),t._v(" 3.3.1 总体架构")]),t._v(" "),s("p",[t._v("消息高可用采用2m-2s（同步双写）方式")]),t._v(" "),s("p",[s("img",{attrs:{src:a(980),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_3-3-2-集群工作流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-集群工作流程"}},[t._v("#")]),t._v(" 3.3.2 集群工作流程")]),t._v(" "),s("ol",[s("li",[t._v("启动NameServer，NameServer起来后监听端口，等待Broker、Producer、Consumer连上来，相当于一个路由控制中心。")]),t._v(" "),s("li",[t._v("Broker启动，跟所有的NameServer保持长连接，定时发送心跳包。心跳包中包含当前Broker信息(IP+端口等)以及存储所有Topic信息。注册成功后，NameServer集群中就有Topic跟Broker的映射关系。")]),t._v(" "),s("li",[t._v("收发消息前，先创建Topic，创建Topic时需要指定该Topic要存储在哪些Broker上，也可以在发送消息时自动创建Topic。")]),t._v(" "),s("li",[t._v("Producer发送消息，启动时先跟NameServer集群中的其中一台建立长连接，并从NameServer中获取当前发送的Topic存在哪些Broker上，轮询从队列列表中选择一个队列，然后与队列所在的Broker建立长连接从而向Broker发消息。")]),t._v(" "),s("li",[t._v("Consumer跟Producer类似，跟其中一台NameServer建立长连接，获取当前订阅Topic存在哪些Broker上，然后直接跟Broker建立连接通道，开始消费消息。")])]),t._v(" "),s("h3",{attrs:{id:"_3-3-3-服务器环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3-服务器环境"}},[t._v("#")]),t._v(" 3.3.3 服务器环境")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("序号")])]),t._v(" "),s("th",[s("strong",[t._v("IP")])]),t._v(" "),s("th",[s("strong",[t._v("角色")])]),t._v(" "),s("th",[s("strong",[t._v("架构模式")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("192.168.25.135")]),t._v(" "),s("td",[t._v("nameserver、brokerserver")]),t._v(" "),s("td",[t._v("Master1、Slave2")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("192.168.25.138")]),t._v(" "),s("td",[t._v("nameserver、brokerserver")]),t._v(" "),s("td",[t._v("Master2、Slave1")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-3-4-host添加信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-4-host添加信息"}},[t._v("#")]),t._v(" 3.3.4 Host添加信息")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/hosts\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("配置如下:")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nameserver")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".3.36 rocketmq-nameserver1\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".3.37 rocketmq-nameserver2\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# broker")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".3.201 rocketmq-master1\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".3.201 rocketmq-slave2\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".3.37 rocketmq-master2\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".3.37 rocketmq-slave1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("配置完成后, 重启网卡")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("systemctl restart network\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-3-5-防火墙配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-5-防火墙配置"}},[t._v("#")]),t._v(" 3.3.5 防火墙配置")]),t._v(" "),s("p",[t._v("宿主机需要远程访问虚拟机的rocketmq服务和web服务，需要开放相关的端口号，简单粗暴的方式是直接关闭防火墙")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭防火墙")]),t._v("\nsystemctl stop firewalld.service \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看防火墙的状态")]),t._v("\nfirewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--state")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 禁止firewall开机启动")]),t._v("\nsystemctl disable firewalld.service\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("或者为了安全，只开放特定的端口号，RocketMQ默认使用3个端口：9876 、10911 、11011 。如果防火墙没有关闭的话，那么防火墙就必须开放这些端口：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("nameserver")]),t._v(" 默认使用 9876 端口")]),t._v(" "),s("li",[s("code",[t._v("master")]),t._v(" 默认使用 10911 端口")]),t._v(" "),s("li",[s("code",[t._v("slave")]),t._v(" 默认使用11011 端口")])]),t._v(" "),s("p",[t._v("执行以下命令：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开放name server默认端口")]),t._v("\nfirewall-cmd --remove-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9876")]),t._v("/tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--permanent")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开放master默认端口")]),t._v("\nfirewall-cmd --remove-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10911")]),t._v("/tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--permanent")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开放slave默认端口 (当前集群模式可不开启)")]),t._v("\nfirewall-cmd --remove-port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11011")]),t._v("/tcp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--permanent")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启防火墙")]),t._v("\nfirewall-cmd "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--reload")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"_3-3-6-环境变量配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-6-环境变量配置"}},[t._v("#")]),t._v(" 3.3.6 环境变量配置")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("在profile文件的末尾加入如下命令")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#set rocketmq")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ROCKETMQ_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/rocketmq-all-4.8.0-bin-release\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ROCKETMQ_HOME")]),t._v("/bin\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" ROCKETMQ_HOME "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("\n\n\n/soft/mq/rocketmq\n/soft/mq/rocketmq\n\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ROCKETMQ_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/soft/mq/rocketmq\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ROCKETMQ_HOME")]),t._v("/bin\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" ROCKETMQ_HOME "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("输入:wq! 保存并退出， 并使得配置立刻生效：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("37")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#set rocketmq")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ROCKETMQ_HOME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/rocketmq/rocketmq-4.8.0-bin\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ROCKETMQ_HOME")]),t._v("/bin\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" ROCKETMQ_HOME "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"_3-3-7-创建消息存储路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-7-创建消息存储路径"}},[t._v("#")]),t._v(" 3.3.7 创建消息存储路径")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /usr/local/rocketmq/store\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /usr/local/rocketmq/store/commitlog\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /usr/local/rocketmq/store/consumequeue\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /usr/local/rocketmq/store/index\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"_3-3-8-broker配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-8-broker配置文件"}},[t._v("#")]),t._v(" 3.3.8 broker配置文件")]),t._v(" "),s("h4",{attrs:{id:"_1-master1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-master1"}},[t._v("#")]),t._v(" 1）master1")]),t._v(" "),s("p",[t._v("服务器：192.168.3.37")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-a.properties\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("修改配置如下：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#所属集群名字")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerClusterName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-cluster\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#broker名字，注意此处不同的配置文件填写的不一样")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("broker-a\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 表示 Master，>0 表示 Slave")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#nameServer地址，分号分割")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("namesrvAddr")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-nameserver1:9876\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("defaultTopicQueueNums")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateTopicEnable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateSubscriptionGroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 对外服务的监听端口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("listenPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10911")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除文件时间点，默认凌晨 4点")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("deleteWhen")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("04\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#文件保留时间，默认 48 小时")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fileReservedTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog每个文件的大小默认1G")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1073741824")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ConsumeQueue每个文件默认存30W条，根据业务情况调整")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#destroyMapedFileIntervalForcibly=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#redeleteHangedFileInterval=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#检测物理文件磁盘空间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("diskMaxUsedSpaceRatio")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathRootDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/soft/mq/rocketmq/store\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog 存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/soft/mq/rocketmq/store/commitlog\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消费队列存储路径存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/soft/mq/rocketmq/store/comsumequeue\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消息索引存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathIndex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/soft/mq/rocketmq/store/index\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkpoint 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storeCheckpoint")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/soft/mq/rocketmq/store/checkpoint\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#abort 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("abortFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/soft/mq/rocketmq/store/abort\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#限制的消息大小")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("maxMessageSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogLeastPages=4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueLeastPages=2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogThoroughInterval=10000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueThoroughInterval=60000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 的角色")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_MASTER 异步复制Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_MASTER 同步双写Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SLAVE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerRole")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SYNC_MASTER\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#刷盘方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_FLUSH 异步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_FLUSH 同步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flushDiskType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SYNC_FLUSH\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkTransactionMessageEnable=false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#发消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#sendMessageThreadPoolNums=128")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#拉消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#pullMessageThreadPoolNums=128")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br")])]),s("h4",{attrs:{id:"_2-slave2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-slave2"}},[t._v("#")]),t._v(" 2）slave2")]),t._v(" "),s("p",[t._v("服务器：192.168.3.37")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-b-s.properties\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("修改配置如下：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#所属集群名字")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerClusterName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-cluster\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#broker名字，注意此处不同的配置文件填写的不一样")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("broker-b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 表示 Master，>0 表示 Slave")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#nameServer地址，分号分割")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("namesrvAddr")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-nameserver1:9876"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("rocketmq-nameserver2:9876\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("defaultTopicQueueNums")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateTopicEnable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateSubscriptionGroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 对外服务的监听端口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("listenPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11011")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除文件时间点，默认凌晨 4点")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("deleteWhen")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("04\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#文件保留时间，默认 48 小时")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fileReservedTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog每个文件的大小默认1G")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1073741824")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ConsumeQueue每个文件默认存30W条，根据业务情况调整")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#destroyMapedFileIntervalForcibly=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#redeleteHangedFileInterval=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#检测物理文件磁盘空间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("diskMaxUsedSpaceRatio")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathRootDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/rocketmq/message2\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog 存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/rocketmq/message2/commitlog\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消费队列存储路径存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/rocketmq/message2/consumequeue\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消息索引存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathIndex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/rocketmq/message2/index\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkpoint 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storeCheckpoint")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/rocketmq/message2/checkpoint\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#abort 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("abortFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/rocketmq/message2/abort\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#限制的消息大小")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("maxMessageSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogLeastPages=4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueLeastPages=2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogThoroughInterval=10000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueThoroughInterval=60000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 的角色")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_MASTER 异步复制Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_MASTER 同步双写Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SLAVE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerRole")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SLAVE\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#刷盘方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_FLUSH 异步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_FLUSH 同步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flushDiskType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ASYNC_FLUSH\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkTransactionMessageEnable=false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#发消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#sendMessageThreadPoolNums=128")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#拉消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#pullMessageThreadPoolNums=128")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br")])]),s("h4",{attrs:{id:"_3-master2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-master2"}},[t._v("#")]),t._v(" 3）master2")]),t._v(" "),s("p",[t._v("服务器：192.168.3.201")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /usr/soft/rocketmq/conf/2m-2s-sync/broker-b.properties\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("修改配置如下：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#所属集群名字")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerClusterName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-cluster\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#broker名字，注意此处不同的配置文件填写的不一样")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("broker-b\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 表示 Master，>0 表示 Slave")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#nameServer地址，分号分割")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("namesrvAddr")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-nameserver1:9876"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("rocketmq-nameserver2:9876\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("defaultTopicQueueNums")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateTopicEnable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateSubscriptionGroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 对外服务的监听端口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("listenPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10911")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除文件时间点，默认凌晨 4点")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("deleteWhen")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("04\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#文件保留时间，默认 48 小时")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fileReservedTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog每个文件的大小默认1G")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1073741824")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ConsumeQueue每个文件默认存30W条，根据业务情况调整")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#destroyMapedFileIntervalForcibly=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#redeleteHangedFileInterval=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#检测物理文件磁盘空间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("diskMaxUsedSpaceRatio")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathRootDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog 存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message/commitlog\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消费队列存储路径存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message/consumequeue\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消息索引存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathIndex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message/index\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkpoint 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storeCheckpoint")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message/checkpoint\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#abort 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("abortFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message/abort\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#限制的消息大小")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("maxMessageSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogLeastPages=4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueLeastPages=2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogThoroughInterval=10000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueThoroughInterval=60000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 的角色")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_MASTER 异步复制Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_MASTER 同步双写Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SLAVE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerRole")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SYNC_MASTER\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#刷盘方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_FLUSH 异步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_FLUSH 同步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flushDiskType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SYNC_FLUSH\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkTransactionMessageEnable=false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#发消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#sendMessageThreadPoolNums=128")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#拉消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#pullMessageThreadPoolNums=128")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br")])]),s("h4",{attrs:{id:"_4-slave1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-slave1"}},[t._v("#")]),t._v(" 4）slave1")]),t._v(" "),s("p",[t._v("服务器：192.168.3.201")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /usr/soft/rocketmq/conf/2m-2s-sync/broker-a-s.properties\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("修改配置如下：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#所属集群名字")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerClusterName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-cluster\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#broker名字，注意此处不同的配置文件填写的不一样")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("broker-a\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 表示 Master，>0 表示 Slave")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#nameServer地址，分号分割")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("namesrvAddr")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rocketmq-nameserver1:9876"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("rocketmq-nameserver2:9876\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在发送消息时，自动创建服务器不存在的topic，默认创建的队列数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("defaultTopicQueueNums")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建Topic，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateTopicEnable")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("autoCreateSubscriptionGroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 对外服务的监听端口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("listenPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11011")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除文件时间点，默认凌晨 4点")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("deleteWhen")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("04\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#文件保留时间，默认 48 小时")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fileReservedTime")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog每个文件的大小默认1G")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1073741824")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ConsumeQueue每个文件默认存30W条，根据业务情况调整")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("mapedFileSizeConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#destroyMapedFileIntervalForcibly=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#redeleteHangedFileInterval=120000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#检测物理文件磁盘空间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("diskMaxUsedSpaceRatio")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("88")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathRootDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message2\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#commitLog 存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathCommitLog")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message2/commitlog\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消费队列存储路径存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathConsumeQueue")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message2/consumequeue\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#消息索引存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storePathIndex")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message2/index\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkpoint 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("storeCheckpoint")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message2/checkpoint\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#abort 文件存储路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("abortFile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/install/soft/rocketmq/message2/abort\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#限制的消息大小")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("maxMessageSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("65536")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogLeastPages=4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueLeastPages=2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushCommitLogThoroughInterval=10000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flushConsumeQueueThoroughInterval=60000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Broker 的角色")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_MASTER 异步复制Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_MASTER 同步双写Master")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SLAVE")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("brokerRole")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SLAVE\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#刷盘方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- ASYNC_FLUSH 异步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- SYNC_FLUSH 同步刷盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flushDiskType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ASYNC_FLUSH\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#checkTransactionMessageEnable=false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#发消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#sendMessageThreadPoolNums=128")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#拉消息线程池数量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#pullMessageThreadPoolNums=128")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br")])]),s("h3",{attrs:{id:"_3-3-9-修改启动脚本文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-9-修改启动脚本文件"}},[t._v("#")]),t._v(" 3.3.9 修改启动脚本文件")]),t._v(" "),s("h4",{attrs:{id:"_1-runbroker-sh"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-runbroker-sh"}},[t._v("#")]),t._v(" 1）runbroker.sh")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /usr/local/rocketmq/bin/runbroker.sh\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("需要根据内存大小进行适当的对JVM参数进行调整：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#===================================================")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开发环境配置 JVM Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${JAVA_OPT}")]),t._v(' -server -Xms256m -Xmx256m -Xmn128m"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("####2）runserver.sh")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /usr/local/rocketmq/bin/runserver.sh\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_OPT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${JAVA_OPT}")]),t._v(' -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_3-3-10-服务启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-10-服务启动"}},[t._v("#")]),t._v(" 3.3.10 服务启动")]),t._v(" "),s("h4",{attrs:{id:"_1-启动nameserve集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-启动nameserve集群"}},[t._v("#")]),t._v(" 1）启动NameServe集群")]),t._v(" "),s("p",[t._v("分别在192.168.3.37和192.168.3.201启动NameServer")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/rocketmq/bin\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" mqnamesrv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n\n/install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h4",{attrs:{id:"_2-启动broker集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动broker集群"}},[t._v("#")]),t._v(" 2）启动Broker集群")]),t._v(" "),s("ul",[s("li",[t._v("在192.168.3.37上启动master1和slave2")])]),t._v(" "),s("p",[t._v("master1：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/rocketmq/bin\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" mqbroker "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-a.properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("slave2：")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/rocketmq/bin\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" mqbroker "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" /opt/rocketmq/rocketmq-4.8.0-bin/conf/2m-2s-sync/broker-b-s.properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("ul",[s("li",[t._v("在192.168.3.201上启动master2和slave2")])]),t._v(" "),s("p",[t._v("master2")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/rocketmq/bin\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" mqbroker "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" /install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync/broker-b.properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("slave1")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/rocketmq/bin\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" mqbroker "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" /install/soft/rocketmq/rocketmq-all-4.8.0-bin-release/conf/2m-2s-sync/broker-a-s.properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"_3-3-11-查看进程状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-11-查看进程状态"}},[t._v("#")]),t._v(" 3.3.11 查看进程状态")]),t._v(" "),s("p",[t._v("启动后通过JPS查看启动进程")]),t._v(" "),s("p",[s("img",{attrs:{src:a(981),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_3-3-12-查看日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-12-查看日志"}},[t._v("#")]),t._v(" 3.3.12 查看日志")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看nameServer日志")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-500f")]),t._v(" ~/logs/rocketmqlogs/namesrv.log\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看broker日志")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-500f")]),t._v(" ~/logs/rocketmqlogs/broker.log\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"_3-4-mqadmin管理工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-mqadmin管理工具"}},[t._v("#")]),t._v(" 3.4 mqadmin管理工具")]),t._v(" "),s("h3",{attrs:{id:"_3-4-1-使用方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-使用方式"}},[t._v("#")]),t._v(" 3.4.1 使用方式")]),t._v(" "),s("p",[t._v("进入RocketMQ安装位置，在bin目录下执行"),s("code",[t._v("./mqadmin {command} {args}")])]),t._v(" "),s("p",[t._v("###3.4.2 命令介绍")]),t._v(" "),s("p",[t._v("####1）Topic相关")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"99.0pt"},attrs:{height:"132"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"444.0pt","border-top":"none",width:"122pt"},attrs:{rowspan:"8",height:"593",width:"163"}},[t._v("updateTopic")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"8",width:"135"}},[t._v("创建更新Topic配置")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("Broker 地址，表示 topic 所在\n  Broker，只支持单台Broker，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"99.0pt"},attrs:{height:"132"}},[s("td",{staticClass:"xl65",staticStyle:{height:"99.0pt",width:"112pt"},attrs:{height:"132",width:"149"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("cluster 名称，表示 topic 所在集群（集群可通过\n  clusterList 查询）")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-h-")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"57.0pt"},attrs:{height:"76"}},[s("td",{staticClass:"xl65",staticStyle:{height:"57.0pt",width:"112pt"},attrs:{height:"76",width:"149"}},[t._v("-p")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("指定新topic的读写权限( W=2|R=4|WR=6 )")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"112pt"},attrs:{height:"39",width:"149"}},[t._v("-r")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("可读队列数（默认为 8）")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"112pt"},attrs:{height:"39",width:"149"}},[t._v("-w")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("可写队列数（默认为 8）")])]),t._v(" "),s("tr",{staticStyle:{height:"71.0pt"},attrs:{height:"95"}},[s("td",{staticClass:"xl65",staticStyle:{height:"71.0pt",width:"112pt"},attrs:{height:"95",width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic 名称（名称只能使用字符\n  ^[a-zA-Z0-9_-]+$ ）")])]),t._v(" "),s("tr",{staticStyle:{height:"99.0pt"},attrs:{height:"132"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"230.0pt","border-top":"none",width:"122pt"},attrs:{rowspan:"4",height:"307",width:"163"}},[t._v("deleteTopic")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"4",width:"135"}},[t._v("删除Topic")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("cluster 名称，表示删除某集群下的某个 topic （集群\n  可通过 clusterList 查询）")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"71.0pt"},attrs:{height:"95"}},[s("td",{staticClass:"xl65",staticStyle:{height:"71.0pt",width:"112pt"},attrs:{height:"95",width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic 名称（名称只能使用字符\n  ^[a-zA-Z0-9_-]+$ ）")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"215.0pt","border-top":"none",width:"122pt"},attrs:{rowspan:"3",height:"287",width:"163"}},[t._v("topicList")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"3",width:"135"}},[t._v("查看 Topic 列表信息")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"155.0pt"},attrs:{height:"207"}},[s("td",{staticClass:"xl65",staticStyle:{height:"155.0pt",width:"112pt"},attrs:{height:"207",width:"149"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("不配置-c只返回topic列表，增加-c返回clusterName,\n  topic, consumerGroup信息，即topic的所属集群和订阅关系，没有参数")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"77.0pt","border-top":"none",width:"122pt"},attrs:{rowspan:"3",height:"103",width:"163"}},[t._v("topicRoute")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"3",width:"135"}},[t._v("查看 Topic 路由信息")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"77.0pt","border-top":"none",width:"122pt"},attrs:{rowspan:"3",height:"103",width:"163"}},[t._v("topicStatus")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"3",width:"135"}},[t._v("查看 Topic 消息队列offset")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"77.0pt","border-top":"none",width:"122pt"},attrs:{rowspan:"3",height:"103",width:"163"}},[t._v("topicClusterList")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"3",width:"135"}},[t._v("查看 Topic 所在集群列表")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"380pt","border-top":"none",width:"122pt"},attrs:{rowspan:"6",height:"518",width:"163"}},[t._v("updateTopicPerm")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"6",width:"135"}},[t._v("更新 Topic 读写权限")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"99.0pt"},attrs:{height:"132"}},[s("td",{staticClass:"xl65",staticStyle:{height:"99.0pt",width:"112pt"},attrs:{height:"132",width:"149"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("Broker 地址，表示 topic 所在\n  Broker，只支持单台Broker，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"57.0pt"},attrs:{height:"76"}},[s("td",{staticClass:"xl65",staticStyle:{height:"57.0pt",width:"112pt"},attrs:{height:"76",width:"149"}},[t._v("-p")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("指定新 topic 的读写权限( W=2|R=4|WR=6 )")])]),t._v(" "),s("tr",{staticStyle:{height:"155.0pt"},attrs:{height:"207"}},[s("td",{staticClass:"xl65",staticStyle:{height:"155.0pt",width:"112pt"},attrs:{height:"207",width:"149"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("cluster 名称，表示 topic 所在集群（集群可通过\n  clusterList 查询），-b优先，如果没有-b，则对集群中所有Broker执行命令")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"149.0pt","border-top":"none",width:"122pt"},attrs:{rowspan:"5",height:"199",width:"163"}},[t._v("updateOrderConf")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"5",width:"135"}},[t._v("从NameServer上创建、删除、获取特定命名空间的kv配置，目前还未启用")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic，键")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"112pt"},attrs:{height:"39",width:"149"}},[t._v("-v")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("orderConf，值")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-m")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("method，可选get、put、delete")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt",height:"140pt","border-top":"none",width:"122pt"},attrs:{rowspan:"4",height:"198",width:"163"}},[t._v("allocateMQ")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"4",width:"135"}},[t._v("以平均负载算法计算消费者列表负载消息队列的负载结果")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("topic 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"71.0pt"},attrs:{height:"95"}},[s("td",{staticClass:"xl65",staticStyle:{height:"71.0pt",width:"112pt"},attrs:{height:"95",width:"149"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("ipList，用逗号分隔，计算这些ip去负载Topic的消息队列")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl68",staticStyle:{"border-bottom":"1.0pt solid black",height:"106.0pt","border-top":"1.0pt",width:"122pt"},attrs:{rowspan:"4",height:"142",width:"163"}},[t._v("statsAll")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"101pt"},attrs:{rowspan:"4",width:"135"}},[t._v("打印Topic订阅关系、TPS、积累量、24h读写总量等信息")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"112pt"},attrs:{width:"149"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"112pt"},attrs:{height:"57",width:"149"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"112pt"},attrs:{height:"39",width:"149"}},[t._v("-a")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("是否只打印活跃topic")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"112pt"},attrs:{height:"23",width:"149"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"119pt"},attrs:{width:"159"}},[t._v("指定topic")])])]),t._v(" "),s("p",[t._v("####2）集群相关")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"155.0pt"},attrs:{height:"207"}},[s("td",{staticClass:"xl67",staticStyle:{"border-bottom":"1.0pt",height:"244.0pt","border-top":"none",width:"133pt"},attrs:{rowspan:"4",height:"326",width:"177"}},[s("span",{staticStyle:{"mso-spacerun":"yes"}}),t._v("clusterList")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"131pt"},attrs:{rowspan:"4",width:"175"}},[t._v("查看集群信息，集群、BrokerName、BrokerId、TPS等信息")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("-m")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("打印更多信息 (增加打印出如下信息 #InTotalYest,\n  #OutTotalYest, #InTotalToday ,#OutTotalToday)")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"133pt"},attrs:{height:"57",width:"177"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"133pt"},attrs:{height:"39",width:"177"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("打印间隔，单位秒")])]),t._v(" "),s("tr",{staticStyle:{height:"71.0pt"},attrs:{height:"95"}},[s("td",{staticClass:"xl67",staticStyle:{"border-bottom":"1.0pt",height:"292.0pt","border-top":"none",width:"133pt"},attrs:{rowspan:"8",height:"391",width:"177"}},[t._v("clusterRT")]),t._v(" "),s("td",{staticClass:"xl70",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"131pt"},attrs:{rowspan:"8",width:"175"}},[t._v("发送消息检测集群各Broker RT。消息发往${BrokerName} Topic。")]),t._v(" "),s("td",{staticClass:"xl65",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("-a")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("amount，每次探测的总数，RT = 总时间 /\n  amount")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"133pt"},attrs:{height:"39",width:"177"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("消息大小，单位B")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("探测哪个集群")])]),t._v(" "),s("tr",{staticStyle:{height:"57.0pt"},attrs:{height:"76"}},[s("td",{staticClass:"xl65",staticStyle:{height:"57.0pt",width:"133pt"},attrs:{height:"76",width:"177"}},[t._v("-p")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("是否打印格式化日志，以|分割，默认不打印")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl65",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"133pt"},attrs:{height:"39",width:"177"}},[t._v("-m")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("所属机房，打印使用")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl65",staticStyle:{height:"29.0pt",width:"133pt"},attrs:{height:"39",width:"177"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("发送间隔，单位秒")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl65",staticStyle:{height:"43.0pt",width:"133pt"},attrs:{height:"57",width:"177"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl66",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("NameServer 服务地址，格式 ip:port")])])]),t._v(" "),s("p",[t._v("####3）Broker相关")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"154.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"6",height:"206",width:"191"}},[t._v("updateBrokerConfig")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"6",width:"87"}},[t._v("更新 Broker 配置文件，会修改Broker.conf")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 地址，格式为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("cluster 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-k")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("key 值")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-v")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("value 值")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"103.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"3",height:"137",width:"191"}},[t._v("brokerStatus")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"3",width:"87"}},[t._v("查看 Broker 统计信息、运行状态（你想要的信息几乎都在里面）")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 地址，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"192.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"6",height:"256",width:"191"}},[t._v("brokerConsumeStats")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"6",width:"87"}},[t._v("Broker中各个消费者的消费情况，按Message Queue维度返回Consume\n  Offset，Broker Offset，Diff，TImestamp等信息")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 地址，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("请求超时时间")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-l")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("diff阈值，超过阈值才打印")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-o")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否为顺序topic，一般为false")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"86.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"2",height:"114",width:"191"}},[t._v("getBrokerConfig")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"2",width:"87"}},[t._v("获取Broker配置")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 地址，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"103.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"3",height:"137",width:"191"}},[t._v("wipeWritePerm")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"3",width:"87"}},[t._v("从NameServer上清除 Broker写权限")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 地址，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"120.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"4",height:"160",width:"191"}},[t._v("cleanExpiredCQ")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"4",width:"87"}},[t._v("清理Broker上过期的Consume Queue，如果手动减少对列数可能产生过期队列")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 地址，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("集群名称")])]),t._v(" "),s("tr",{staticStyle:{"mso-height-source":"userset",height:"66.0pt"},attrs:{height:"88"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"143.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"4",height:"191",width:"191"}},[t._v("cleanUnusedTopic")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"4",width:"87"}},[t._v("清理Broker上不使用的Topic，从内存中释放Topic的Consume\n  Queue，如果手动删除Topic会产生不使用的Topic")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 地址，地址为ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("集群名称")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"149.0pt","border-top":"none",width:"143pt"},attrs:{rowspan:"5",height:"199",width:"191"}},[t._v("sendMsgStatus")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"5",width:"87"}},[t._v("向Broker发消息，返回发送状态和RT")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("BrokerName，注意不同于Broker地址")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消息大小，单位B")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("发送次数")])])]),t._v(" "),s("p",[t._v("####4）消息相关")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"96.0pt"},attrs:{height:"128"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"156.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"3",height:"208",width:"87"}},[t._v("queryMsgById")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"3",width:"87"}},[t._v("根据offsetMsgId查询msg，如果使用开源控制台，应使用offsetMsgId，此命令还有其他参数，具体作用请阅读QueryMsgByIdSubCommand。")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("msgId")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"94.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"4",height:"126",width:"87"}},[t._v("queryMsgByKey")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"4",width:"87"}},[t._v("根据消息 Key 查询消息")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-k")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("msgKey")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Topic 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"169.0pt"},attrs:{height:"225"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"292.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"6",height:"390",width:"87"}},[t._v("queryMsgByOffset")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"6",width:"87"}},[t._v("根据 Offset 查询消息")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker 名称，（这里需要注意\n  填写的是 Broker 的名称，不是 Broker 的地址，Broker 名称可以在 clusterList 查到）")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("query 队列 id")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-o")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("offset 值")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic 名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{attrs:{height:"47"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"156.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"6",height:"209",width:"87"}},[t._v("queryMsgByUniqueKey")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"6",width:"87"}},[t._v("根据msgId查询，msgId不同于offsetMsgId，区别详见常见运维问题。-g，-d配合使用，查到消息后尝试让特定的消费者消费消息并返回消费结果")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("uniqe msg id")])]),t._v(" "),s("tr",{staticStyle:{height:"27.0pt"},attrs:{height:"36"}},[s("td",{staticClass:"xl67",staticStyle:{height:"27.0pt",width:"65pt"},attrs:{height:"36",width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("consumerGroup")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-d")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("clientId")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"5",height:"149",width:"87"}},[t._v("checkMsgSendRT")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"5",width:"87"}},[t._v("检测向topic发消息的RT，功能类似clusterRT")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-a")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("探测次数")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消息大小")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"162.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"8",height:"218",width:"87"}},[t._v("sendMessage")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"8",width:"87"}},[t._v("发送一条消息，可以根据配置发往特定Message Queue，或普通发送。")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-p")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("body，消息体")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-k")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("keys")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("tags")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("BrokerName")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("queueId")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"232.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"10",height:"312",width:"87"}},[t._v("consumeMessage")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"10",width:"87"}},[t._v("消费消息。可以根据offset、开始&结束时间戳、消息队列消费消息，配置不同执行不同消费逻辑，详见ConsumeMessageCommand。")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("BrokerName")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-o")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("从offset开始消费")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("queueId")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费者分组")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("开始时间戳，格式详见-h")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-d")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("结束时间戳")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费多少条消息")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"210.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"8",height:"282",width:"87"}},[t._v("printMsg")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"8",width:"87"}},[t._v("从Broker消费消息并打印，可选时间段")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("字符集，例如UTF-8")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("subExpress，过滤表达式")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("开始时间戳，格式参见-h")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-e")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("结束时间戳")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-d")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否打印消息体")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"290.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"12",height:"390",width:"87"}},[t._v("printMsgByQueue")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"12",width:"87"}},[t._v("类似printMsg，但指定Message Queue")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("queueId")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-a")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("BrokerName")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("字符集，例如UTF-8")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("subExpress，过滤表达式")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("开始时间戳，格式参见-h")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-e")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("结束时间戳")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-p")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否打印消息")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-d")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否打印消息体")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-f")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否统计tag数量并打印")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"307.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"7",height:"410",width:"87"}},[t._v("resetOffsetByTime")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"7",width:"87"}},[t._v("按时间戳重置offset，Broker和consumer都会重置")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费者分组")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("重置为此时间戳对应的offset")])]),t._v(" "),s("tr",{staticStyle:{height:"141.0pt"},attrs:{height:"188"}},[s("td",{staticClass:"xl67",staticStyle:{height:"141.0pt",width:"65pt"},attrs:{height:"188",width:"87"}},[t._v("-f")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否强制重置，如果false，只支持回溯offset，如果true，不管时间戳对应offset与consumeOffset关系")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否重置c++客户端offset")])])]),t._v(" "),s("h4",{attrs:{id:"_5-消费者、消费组相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-消费者、消费组相关"}},[t._v("#")]),t._v(" 5）消费者、消费组相关")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"110pt","border-top":"none",width:"65pt"},attrs:{rowspan:"4",height:"158",width:"87"}},[t._v("consumerProgress")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"4",width:"87"}},[t._v("查看订阅组消费状态，可以查看具体的client IP的消息积累量")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费者所属组名")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否打印client IP")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{"mso-height-source":"userset",height:"79.0pt"},attrs:{height:"105"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt",height:"195.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"5",height:"260",width:"87"}},[t._v("consumerStatus")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"5",width:"87"}},[t._v("查看消费者状态，包括同一个分组中是否都是相同的订阅，分析Process\n  Queue是否堆积，返回消费者jstack结果，内容较多，使用者参见ConsumerStatusSubCommand")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"27.0pt"},attrs:{height:"36"}},[s("td",{staticClass:"xl67",staticStyle:{height:"27.0pt",width:"65pt"},attrs:{height:"36",width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("consumer group")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("clientId")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否执行jstack")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"5",height:"181",width:"87"}},[t._v("getConsumerStatus")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"5",width:"87"}},[t._v("获取 Consumer 消费进度")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费者所属组名")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("查询主题")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Consumer 客户端 ip")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"13",height:"761",width:"87"}},[t._v("updateSubGroup")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"13",width:"87"}},[t._v("更新或创建订阅关系")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker地址")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("集群名称")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费者分组名称")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("分组是否允许消费")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-m")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否从最小offset开始消费")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-d")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("是否是广播模式")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-q")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("重试队列数量")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-r")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("最大重试次数")])]),t._v(" "),s("tr",{staticStyle:{height:"155.0pt"},attrs:{height:"207"}},[s("td",{staticClass:"xl67",staticStyle:{height:"155.0pt",width:"65pt"},attrs:{height:"207",width:"87"}},[t._v("-i")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("当slaveReadEnable开启时有效，且还未达到从slave消费时建议从哪个BrokerId消费，可以配置备机id，主动从备机消费")])]),t._v(" "),s("tr",{staticStyle:{height:"99.0pt"},attrs:{height:"132"}},[s("td",{staticClass:"xl67",staticStyle:{height:"99.0pt",width:"65pt"},attrs:{height:"132",width:"87"}},[t._v("-w")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("如果Broker建议从slave消费，配置决定从哪个slave消费，配置BrokerId，例如1")])]),t._v(" "),s("tr",{staticStyle:{height:"57.0pt"},attrs:{height:"76"}},[s("td",{staticClass:"xl67",staticStyle:{height:"57.0pt",width:"65pt"},attrs:{height:"76",width:"87"}},[t._v("-a")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("当消费者数量变化时是否通知其他消费者负载均衡")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"5",height:"165",width:"87"}},[t._v("deleteSubGroup")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"5",width:"87"}},[t._v("从Broker删除订阅关系")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-b")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("Broker地址")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-c")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("集群名称")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl67",staticStyle:{height:"29.0pt",width:"65pt"},attrs:{height:"39",width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费者分组名称")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"6",height:"172",width:"87"}},[t._v("cloneGroupOffset")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"6",width:"87"}},[t._v("在目标群组中使用源群组的offset")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("源消费者组")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-d")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("目标消费者组")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("topic名称")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-o")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("暂未使用")])])]),t._v(" "),s("h4",{attrs:{id:"_6-连接相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-连接相关"}},[t._v("#")]),t._v(" 6）连接相关")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"3",height:"119",width:"87"}},[t._v("consumerConnec tion")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"3",width:"87"}},[t._v("查询 Consumer 的网络连接")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("消费者所属组名")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"29.0pt"},attrs:{height:"39"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"4",height:"142",width:"87"}},[t._v("producerConnec tion")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"4",width:"87"}},[t._v("查询 Producer 的网络连接")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-g")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("生产者所属组名")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-t")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("主题名称")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])])]),t._v(" "),s("h4",{attrs:{id:"_7-nameserver相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-nameserver相关"}},[t._v("#")]),t._v(" 7）NameServer相关")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"16.0pt"},attrs:{height:"21"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"5",height:"143",width:"87"}},[t._v("updateKvConfig")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"5",width:"87"}},[t._v("更新NameServer的kv配置，目前还未使用")]),t._v(" "),s("td",{staticClass:"xl75",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl76",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("命名空间")])]),t._v(" "),s("tr",{staticStyle:{height:"16.0pt"},attrs:{height:"21"}},[s("td",{staticClass:"xl75",staticStyle:{height:"16.0pt",width:"65pt"},attrs:{height:"21",width:"87"}},[t._v("-k")]),t._v(" "),s("td",{staticClass:"xl75",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("key")])]),t._v(" "),s("tr",{staticStyle:{height:"16.0pt"},attrs:{height:"21"}},[s("td",{staticClass:"xl75",staticStyle:{height:"16.0pt",width:"65pt"},attrs:{height:"21",width:"87"}},[t._v("-v")]),t._v(" "),s("td",{staticClass:"xl75",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("value")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"4",height:"126",width:"87"}},[t._v("deleteKvConfig")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"4",width:"87"}},[t._v("删除NameServer的kv配置")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-s")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("命名空间")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-k")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("key")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl67",staticStyle:{height:"43.0pt",width:"65pt"},attrs:{height:"57",width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"2",height:"80",width:"87"}},[t._v("getNamesrvConfig")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"2",width:"87"}},[t._v("获取NameServer配置")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"4",height:"126",width:"87"}},[t._v("updateNamesrvConfig")]),t._v(" "),s("td",{staticClass:"xl72",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"4",width:"87"}},[t._v("修改NameServer配置")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-k")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("key")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-v")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("value")])])]),t._v(" "),s("h4",{attrs:{id:"_8-其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-其他"}},[t._v("#")]),t._v(" 8）其他")]),t._v(" "),s("table",{attrs:{border:"0",cellpadding:"0",cellspacing:"0",width:"714"}},[s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"175"}}),t._v(" "),s("col",{attrs:{width:"177"}}),t._v(" "),s("col",{attrs:{width:"185"}}),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl63",staticStyle:{height:"17.0pt",width:"133pt"},attrs:{height:"23",width:"177"}},[t._v("名称")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"131pt"},attrs:{width:"175"}},[t._v("含义")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"133pt"},attrs:{width:"177"}},[t._v("命令选项")]),t._v(" "),s("td",{staticClass:"xl64",staticStyle:{width:"139pt"},attrs:{width:"185"}},[t._v("说明")])]),t._v(" "),s("tr",{staticStyle:{height:"43.0pt"},attrs:{height:"57"}},[s("td",{staticClass:"xl69",staticStyle:{"border-bottom":"1.0pt","border-top":"none",width:"65pt"},attrs:{rowspan:"2",height:"80",width:"87"}},[t._v("startMonitoring")]),t._v(" "),s("td",{staticClass:"xl71",staticStyle:{"border-bottom":"1.0pt",width:"65pt"},attrs:{rowspan:"2",width:"87"}},[t._v("开启监控进程，监控消息误删、重试队列消息数等")]),t._v(" "),s("td",{staticClass:"xl67",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("-n")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("NameServer 服务地址，格式 ip:port")])]),t._v(" "),s("tr",{staticStyle:{height:"17.0pt"},attrs:{height:"23"}},[s("td",{staticClass:"xl67",staticStyle:{height:"17.0pt",width:"65pt"},attrs:{height:"23",width:"87"}},[t._v("-h")]),t._v(" "),s("td",{staticClass:"xl68",staticStyle:{width:"65pt"},attrs:{width:"87"}},[t._v("打印帮助")])])]),t._v(" "),s("h3",{attrs:{id:"_3-4-3-注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-3-注意事项"}},[t._v("#")]),t._v(" 3.4.3 注意事项")]),t._v(" "),s("ul",[s("li",[t._v("几乎所有命令都需要配置-n表示NameServer地址，格式为ip:port")]),t._v(" "),s("li",[t._v("几乎所有命令都可以通过-h获取帮助")]),t._v(" "),s("li",[t._v("如果既有Broker地址（-b）配置项又有clusterName（-c）配置项，则优先以Broker地址执行命令；如果不配置Broker地址，则对集群中所有主机执行命令")])]),t._v(" "),s("h2",{attrs:{id:"_3-5-集群监控平台搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-集群监控平台搭建"}},[t._v("#")]),t._v(" 3.5 集群监控平台搭建")]),t._v(" "),s("h3",{attrs:{id:"_3-5-1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-1-概述"}},[t._v("#")]),t._v(" 3.5.1 概述")]),t._v(" "),s("p",[s("code",[t._v("RocketMQ")]),t._v("有一个对其扩展的开源项目"),s("a",{attrs:{href:"https://github.com/apache/rocketmq-externals",target:"_blank",rel:"noopener noreferrer"}},[t._v("incubator-rocketmq-externals"),s("OutboundLink")],1),t._v("，这个项目中有一个子模块叫"),s("code",[t._v("rocketmq-console")]),t._v("，这个便是管理控制台项目了，先将"),s("a",{attrs:{href:"https://github.com/apache/rocketmq-externals",target:"_blank",rel:"noopener noreferrer"}},[t._v("incubator-rocketmq-externals"),s("OutboundLink")],1),t._v("拉到本地，因为我们需要自己对"),s("code",[t._v("rocketmq-console")]),t._v("进行编译打包运行。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(982),alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_3-5-2-下载并编译打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-2-下载并编译打包"}},[t._v("#")]),t._v(" 3.5.2 下载并编译打包")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/apache/rocketmq-externals\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" rocketmq-console\nmvn clean package "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Dmaven.test.skip")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("注意：打包前在"),s("code",[t._v("rocketmq-console")]),t._v("中配置"),s("code",[t._v("namesrv")]),t._v("集群地址：")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("rocketmq.config.namesrvAddr")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".25.135:9876"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".25.138:9876\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("启动rocketmq-console：")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" rocketmq-console.jar\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("启动成功后，我们就可以通过浏览器访问"),s("code",[t._v("http://localhost:8080")]),t._v("进入控制台界面了，如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(983),alt:""}})]),t._v(" "),s("p",[t._v("集群状态：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(984),alt:""}})]),t._v(" "),s("h1",{attrs:{id:"_4-消息发送样例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-消息发送样例"}},[t._v("#")]),t._v(" 4. 消息发送样例")]),t._v(" "),s("ul",[s("li",[t._v("导入MQ客户端依赖")])]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.rocketmq"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("rocketmq-client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("4.4.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("ul",[s("li",[t._v("消息发送者步骤分析r")])]),t._v(" "),s("div",{staticClass:"language-tex line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-tex"}},[s("code",[t._v("1.创建消息生产者producer，并制定生产者组名\n2.指定Nameserver地址\n3.启动producer\n4.创建消息对象，指定主题Topic、Tag和消息体\n5.发送消息\n6.关闭生产者producer\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("ul",[s("li",[t._v("消息消费者步骤分析")])]),t._v(" "),s("div",{staticClass:"language-tex line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-tex"}},[s("code",[t._v("1.创建消费者Consumer，制定消费者组名\n2.指定Nameserver地址\n3.订阅主题Topic和Tag\n4.设置回调函数，处理消息\n5.启动消费者consumer\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h2",{attrs:{id:"_4-1-基本样例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-基本样例"}},[t._v("#")]),t._v(" 4.1 基本样例")]),t._v(" "),s("h3",{attrs:{id:"_4-1-1-消息发送"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-消息发送"}},[t._v("#")]),t._v(" 4.1.1 消息发送")]),t._v(" "),s("h4",{attrs:{id:"_1-发送同步消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-发送同步消息"}},[t._v("#")]),t._v(" 1）发送同步消息")]),t._v(" "),s("p",[t._v("这种可靠性同步地发送方式使用的比较广泛，比如：重要的消息通知，短信通知。")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SyncProducer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化消息生产者Producer")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"please_rename_unique_group_name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置NameServer的地址")]),t._v("\n    \tproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动Producer实例")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建消息，并指定Topic，Tag和消息体")]),t._v("\n    \t    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TopicTest"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Topic */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Tag */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello RocketMQ "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemotingHelper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_CHARSET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Message body */")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送消息到一个Broker")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SendResult")]),t._v(" sendResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过sendResult返回消息是否成功送达")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s%n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sendResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果不再发送消息，关闭Producer实例。")]),t._v("\n    \tproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h4",{attrs:{id:"_2-发送异步消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-发送异步消息"}},[t._v("#")]),t._v(" 2）发送异步消息")]),t._v(" "),s("p",[t._v("异步消息通常用在对响应时间敏感的业务场景，即发送端不能容忍长时间地等待Broker的响应。")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncProducer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化消息生产者Producer")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"please_rename_unique_group_name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置NameServer的地址")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动Producer实例")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRetryTimesWhenSendAsyncFailed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建消息，并指定Topic，Tag和消息体")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TopicTest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OrderID188"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemotingHelper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_CHARSET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SendCallback接收异步返回结果的回调")]),t._v("\n                producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SendCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onSuccess")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SendResult")]),t._v(" sendResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%-10d OK %s %n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            sendResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMsgId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      \t              "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%-10d Exception %s %n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \t              e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果不再发送消息，关闭Producer实例。")]),t._v("\n    \tproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br")])]),s("h4",{attrs:{id:"_3-单向发送消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-单向发送消息"}},[t._v("#")]),t._v(" 3）单向发送消息")]),t._v(" "),s("p",[t._v("这种方式主要用在不特别关心发送结果的场景，例如日志发送。")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OnewayProducer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化消息生产者Producer")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"please_rename_unique_group_name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置NameServer的地址")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动Producer实例")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建消息，并指定Topic，Tag和消息体")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TopicTest"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Topic */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Tag */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello RocketMQ "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemotingHelper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_CHARSET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Message body */")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送单向消息，没有任何返回结果")]),t._v("\n        \tproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendOneway")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果不再发送消息，关闭Producer实例。")]),t._v("\n    \tproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("h3",{attrs:{id:"_4-1-2-消费消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-消费消息"}},[t._v("#")]),t._v(" 4.1.2 消费消息")]),t._v(" "),s("h4",{attrs:{id:"_1-负载均衡模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-负载均衡模式"}},[t._v("#")]),t._v(" 1）负载均衡模式")]),t._v(" "),s("p",[t._v("消费者采用负载均衡方式消费消息，多个消费者共同消费队列消息，每个消费者处理的消息不同")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化消息生产者,指定组名")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定Namesrv地址信息.")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 订阅Topic")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//负载均衡模式消费")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMessageModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CLUSTERING")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册回调函数，处理消息")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMessageListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageListenerConcurrently")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("consumeMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" msgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyContext")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s Receive New Messages: %s %n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                              "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONSUME_SUCCESS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//启动消息者")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Consumer Started.%n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h4",{attrs:{id:"_2-广播模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-广播模式"}},[t._v("#")]),t._v(" 2）广播模式")]),t._v(" "),s("p",[t._v("消费者采用广播的方式消费消息，每个消费者消费的消息都是相同的")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化消息生产者,指定组名")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定Namesrv地址信息.")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 订阅Topic")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//广播模式消费")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMessageModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BROADCASTING")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册回调函数，处理消息")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMessageListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageListenerConcurrently")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("consumeMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" msgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyContext")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s Receive New Messages: %s %n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                              "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONSUME_SUCCESS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//启动消息者")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Consumer Started.%n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h2",{attrs:{id:"_4-2-顺序消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-顺序消息"}},[t._v("#")]),t._v(" 4.2 顺序消息")]),t._v(" "),s("p",[t._v("消息有序指的是可以按照消息的发送顺序来消费(FIFO)。RocketMQ可以严格的保证消息有序，可以分为分区有序或者全局有序。")]),t._v(" "),s("p",[t._v("顺序消费的原理解析，在默认的情况下消息发送会采取Round Robin轮询方式把消息发送到不同的queue(分区队列)；而消费消息的时候从多个queue上拉取消息，这种情况发送和消费是不能保证顺序。但是如果控制发送的顺序消息只依次发送到同一个queue中，消费的时候只从这个queue上依次拉取，则就保证了顺序。当发送和消费参与的queue只有一个，则是全局有序；如果多个queue参与，则为分区有序，即相对每个queue，消息都是有序的。")]),t._v(" "),s("p",[t._v("下面用订单进行分区有序的示例。一个订单的顺序流程是：创建、付款、推送、完成。订单号相同的消息会被先后发送到同一个队列中，消费时，同一个OrderId获取到的肯定是同一个队列。")]),t._v(" "),s("h3",{attrs:{id:"_4-2-1-顺序消息生产"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-顺序消息生产"}},[t._v("#")]),t._v(" 4.2.1 顺序消息生产")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n* Producer，发送顺序消息\n*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Producer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"please_rename_unique_group_name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" tags "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagD"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 订单列表")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" orderList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Producer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildOrders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),t._v(" date "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleDateFormat")]),t._v(" sdf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleDateFormat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyy-MM-dd HH:mm:ss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" dateStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sdf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加个时间前缀")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" body "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" dateStr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" Hello RocketMQ "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TopicTest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"KEY"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SendResult")]),t._v(" sendResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageQueueSelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageQueue")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("select")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" mqs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//根据订单id选择发送queue")]),t._v("\n                   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" mqs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" mqs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//订单id")]),t._v("\n\n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SendResult status:%s, queueId:%d, body:%s"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               sendResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSendStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               sendResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessageQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueueId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n               body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n       producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n    * 订单的步骤\n    */")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" orderId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" desc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" orderId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" orderId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orderId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" orderId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" desc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" desc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" desc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OrderStep{"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orderId="')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" orderId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", desc=\'"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" desc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token char"}},[t._v("'\\''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token char"}},[t._v("'}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n    * 生成模拟订单数据\n    */")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildOrders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" orderList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),t._v(" orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103111039L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"创建"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103111065L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"创建"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103111039L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"付款"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103117235L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"创建"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103111065L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"付款"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103117235L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"付款"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103111065L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"完成"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103111039L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"推送"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103117235L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"完成"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       orderDemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderStep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setOrderId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15103111039L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDesc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"完成"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("orderDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" orderList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br"),s("span",{staticClass:"line-number"},[t._v("97")]),s("br"),s("span",{staticClass:"line-number"},[t._v("98")]),s("br"),s("span",{staticClass:"line-number"},[t._v("99")]),s("br"),s("span",{staticClass:"line-number"},[t._v("100")]),s("br"),s("span",{staticClass:"line-number"},[t._v("101")]),s("br"),s("span",{staticClass:"line-number"},[t._v("102")]),s("br"),s("span",{staticClass:"line-number"},[t._v("103")]),s("br"),s("span",{staticClass:"line-number"},[t._v("104")]),s("br"),s("span",{staticClass:"line-number"},[t._v("105")]),s("br"),s("span",{staticClass:"line-number"},[t._v("106")]),s("br"),s("span",{staticClass:"line-number"},[t._v("107")]),s("br"),s("span",{staticClass:"line-number"},[t._v("108")]),s("br"),s("span",{staticClass:"line-number"},[t._v("109")]),s("br"),s("span",{staticClass:"line-number"},[t._v("110")]),s("br"),s("span",{staticClass:"line-number"},[t._v("111")]),s("br"),s("span",{staticClass:"line-number"},[t._v("112")]),s("br"),s("span",{staticClass:"line-number"},[t._v("113")]),s("br"),s("span",{staticClass:"line-number"},[t._v("114")]),s("br"),s("span",{staticClass:"line-number"},[t._v("115")]),s("br"),s("span",{staticClass:"line-number"},[t._v("116")]),s("br"),s("span",{staticClass:"line-number"},[t._v("117")]),s("br"),s("span",{staticClass:"line-number"},[t._v("118")]),s("br"),s("span",{staticClass:"line-number"},[t._v("119")]),s("br"),s("span",{staticClass:"line-number"},[t._v("120")]),s("br"),s("span",{staticClass:"line-number"},[t._v("121")]),s("br"),s("span",{staticClass:"line-number"},[t._v("122")]),s("br"),s("span",{staticClass:"line-number"},[t._v("123")]),s("br"),s("span",{staticClass:"line-number"},[t._v("124")]),s("br"),s("span",{staticClass:"line-number"},[t._v("125")]),s("br"),s("span",{staticClass:"line-number"},[t._v("126")]),s("br"),s("span",{staticClass:"line-number"},[t._v("127")]),s("br"),s("span",{staticClass:"line-number"},[t._v("128")]),s("br"),s("span",{staticClass:"line-number"},[t._v("129")]),s("br"),s("span",{staticClass:"line-number"},[t._v("130")]),s("br"),s("span",{staticClass:"line-number"},[t._v("131")]),s("br"),s("span",{staticClass:"line-number"},[t._v("132")]),s("br"),s("span",{staticClass:"line-number"},[t._v("133")]),s("br"),s("span",{staticClass:"line-number"},[t._v("134")]),s("br")])]),s("h3",{attrs:{id:"_4-2-2-顺序消费消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-顺序消费消息"}},[t._v("#")]),t._v(" 4.2.2 顺序消费消息")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n* 顺序消息消费，带事务方式（应用可控制Offset什么时候提交）\n*/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerInOrder")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" \n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"please_rename_unique_group_name_3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n        * 设置Consumer第一次启动是从队列头部开始消费还是队列尾部开始消费<br>\n        * 如果非第一次启动，那么按照上次消费的位置继续消费\n        */")]),t._v("\n       consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setConsumeFromWhere")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeFromWhere")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONSUME_FROM_FIRST_OFFSET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TopicTest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA || TagC || TagD"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMessageListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageListenerOrderly")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Random")]),t._v(" random "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Random")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n           "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeOrderlyStatus")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("consumeMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" msgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeOrderlyContext")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAutoCommit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" msgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以看到每个queue有唯一的consume线程来消费, 订单对每个queue(分区)有序")]),t._v("\n                   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"consumeThread="')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queueId="')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueueId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", content:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n               "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//模拟业务逻辑处理中...")]),t._v("\n                   "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SECONDS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("random"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextInt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                   e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeOrderlyStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SUCCESS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Consumer Started."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br")])]),s("h2",{attrs:{id:"_4-3-延时消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-延时消息"}},[t._v("#")]),t._v(" 4.3 延时消息")]),t._v(" "),s("p",[t._v("比如电商里，提交了一个订单就可以发送一个延时消息，1h后去检查这个订单的状态，如果还是未付款就取消订单释放库存。")]),t._v(" "),s("h3",{attrs:{id:"_4-3-1-启动消息消费者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-启动消息消费者"}},[t._v("#")]),t._v(" 4.3.1 启动消息消费者")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScheduledMessageConsumer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化消费者")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ExampleConsumer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 订阅Topics")]),t._v("\n      consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TestTopic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册消息监听者")]),t._v("\n      consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMessageListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageListenerConcurrently")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("consumeMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyContext")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Print approximate delay time period")]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Receive message[msgId="')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMsgId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"] "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStoreTimestamp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ms later"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONSUME_SUCCESS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动消费者")]),t._v("\n      consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"_4-3-2-发送延时消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-发送延时消息"}},[t._v("#")]),t._v(" 4.3.2 发送延时消息")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScheduledMessageProducer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实例化一个生产者来产生延时消息")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ExampleProducerGroup"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动生产者")]),t._v("\n      producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" totalMessagesToSend "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" totalMessagesToSend"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TestTopic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello scheduled message "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置延时等级3,这个消息将在10s之后发送(现在只支持固定的几个时间,详看delayTimeLevel)")]),t._v("\n          message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDelayTimeLevel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送消息")]),t._v("\n          producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭生产者")]),t._v("\n      producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("###4.3.3 验证")]),t._v(" "),s("p",[t._v("您将会看到消息的消费比存储时间晚10秒")]),t._v(" "),s("h3",{attrs:{id:"_4-3-4-使用限制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-4-使用限制"}},[t._v("#")]),t._v(" 4.3.4 使用限制")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// org/apache/rocketmq/store/config/MessageStoreConfig.java")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" messageDelayLevel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("现在RocketMq并不支持任意时间的延时，需要设置几个固定的延时等级，从1s到2h分别对应着等级1到18")]),t._v(" "),s("h2",{attrs:{id:"_4-4-批量消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-批量消息"}},[t._v("#")]),t._v(" 4.4 批量消息")]),t._v(" "),s("p",[t._v("批量发送消息能显著提高传递小消息的性能。限制是这些批量消息应该有相同的topic，相同的waitStoreMsgOK，而且不能是延时消息。此外，这一批消息的总大小不应超过4MB。")]),t._v(" "),s("h3",{attrs:{id:"_4-4-1-发送批量消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-1-发送批量消息"}},[t._v("#")]),t._v(" 4.4.1 发送批量消息")]),t._v(" "),s("p",[t._v("如果您每次只发送不超过4MB的消息，则很容易使用批处理，样例如下：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" topic "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"BatchTest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" messages "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OrderID001"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world 0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OrderID002"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world 1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmessages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OrderID003"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world 2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//处理error")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("如果消息的总长度可能大于4MB时，这时候最好把消息进行分割")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListSplitter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Iterator")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SIZE_LIMIT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" currIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListSplitter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" currIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   \t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" nextIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" totalSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" nextIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" nextIndex"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" tmpSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTopic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProperties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Entry")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" entry "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("entrySet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               tmpSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getKey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n           tmpSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tmpSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 增加日志的开销20字节")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tmpSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SIZE_LIMIT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//单个消息超过了最大的限制")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//忽略,否则会阻塞分裂的进程")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" currIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//假如下一个子列表没有元素,则添加这个子列表然后退出循环,否则只是退出循环")]),t._v("\n                  nextIndex"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tmpSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" totalSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SIZE_LIMIT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               totalSize "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" tmpSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" subList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       currIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" subList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//把大的消息分裂成若干个小的消息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListSplitter")]),t._v(" splitter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListSplitter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("splitter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  listItem "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" splitter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listItem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//处理error")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br")])]),s("h2",{attrs:{id:"_4-5-过滤消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-过滤消息"}},[t._v("#")]),t._v(" 4.5 过滤消息")]),t._v(" "),s("p",[t._v("在大多数情况下，TAG是一个简单而有用的设计，其可以来选择您想要的消息。例如：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CID_EXAMPLE"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TOPIC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TAGA || TAGB || TAGC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("消费者将接收包含TAGA或TAGB或TAGC的消息。但是限制是一个消息只能有一个标签，这对于复杂的场景可能不起作用。在这种情况下，可以使用SQL表达式筛选消息。SQL特性可以通过发送消息时的属性来进行计算。在RocketMQ定义的语法下，可以实现一些简单的逻辑。下面是一个例子：")]),t._v(" "),s("div",{staticClass:"language-te line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("------------\n| message  |\n|----------|  a > 5 AND b = 'abc'\n| a = 10   |  --------------------\x3e Gotten\n| b = 'abc'|\n| c = true |\n------------\n------------\n| message  |\n|----------|   a > 5 AND b = 'abc'\n| a = 1    |  --------------------\x3e Missed\n| b = 'abc'|\n| c = true |\n------------\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h3",{attrs:{id:"_4-5-1-sql基本语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-1-sql基本语法"}},[t._v("#")]),t._v(" 4.5.1 SQL基本语法")]),t._v(" "),s("p",[t._v("RocketMQ只定义了一些基本语法来支持这个特性。你也可以很容易地扩展它。")]),t._v(" "),s("ul",[s("li",[t._v("数值比较，比如："),s("strong",[t._v(">，>=，<，<=，BETWEEN，=；")])]),t._v(" "),s("li",[t._v("字符比较，比如："),s("strong",[t._v("=，<>，IN；")])]),t._v(" "),s("li",[s("strong",[t._v("IS NULL")]),t._v(" 或者 "),s("strong",[t._v("IS NOT NULL；")])]),t._v(" "),s("li",[t._v("逻辑符号 "),s("strong",[t._v("AND，OR，NOT；")])])]),t._v(" "),s("p",[t._v("常量支持类型为：")]),t._v(" "),s("ul",[s("li",[t._v("数值，比如："),s("strong",[t._v("123，3.1415；")])]),t._v(" "),s("li",[t._v("字符，比如："),s("strong",[t._v("'abc'，必须用单引号包裹起来；")])]),t._v(" "),s("li",[s("strong",[t._v("NULL")]),t._v("，特殊的常量")]),t._v(" "),s("li",[t._v("布尔值，"),s("strong",[t._v("TRUE")]),t._v(" 或 "),s("strong",[t._v("FALSE")])])]),t._v(" "),s("p",[t._v("只有使用push模式的消费者才能用使用SQL92标准的sql语句，接口如下：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("finalString topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageSelector")]),t._v(" messageSelector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_4-5-2-消息生产者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-2-消息生产者"}},[t._v("#")]),t._v(" 4.5.2 消息生产者")]),t._v(" "),s("p",[t._v("发送消息时，你能通过"),s("code",[t._v("putUserProperty")]),t._v("来设置消息的属性")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"please_rename_unique_group_name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TopicTest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello RocketMQ "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemotingHelper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_CHARSET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置一些属性")]),t._v("\nmsg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("putUserProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("valueOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SendResult")]),t._v(" sendResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h3",{attrs:{id:"_4-5-3-消息消费者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-3-消息消费者"}},[t._v("#")]),t._v(" 4.5.3 消息消费者")]),t._v(" "),s("p",[t._v("用MessageSelector.bySql来使用sql筛选消息")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultMQPushConsumer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"please_rename_unique_group_name_4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有订阅的消息有这个属性a, a >=0 and a <= 3")]),t._v("\nconsumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TopicTest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageSelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bySql")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a between 0 and 3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMessageListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageListenerConcurrently")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("consumeMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" msgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyContext")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumeConcurrentlyStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONSUME_SUCCESS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("h2",{attrs:{id:"_4-6-事务消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-事务消息"}},[t._v("#")]),t._v(" 4.6 事务消息")]),t._v(" "),s("p",[t._v("###4.6.1 流程分析")]),t._v(" "),s("p",[s("img",{attrs:{src:a(985),alt:""}})]),t._v(" "),s("p",[t._v("上图说明了事务消息的大致方案，其中分为两个流程：正常事务消息的发送及提交、事务消息的补偿流程。")]),t._v(" "),s("p",[t._v("####1）事务消息发送及提交")]),t._v(" "),s("p",[t._v("(1) 发送消息（half消息）。")]),t._v(" "),s("p",[t._v("(2) 服务端响应消息写入结果。")]),t._v(" "),s("p",[t._v("(3) 根据发送结果执行本地事务（如果写入失败，此时half消息对业务不可见，本地逻辑不执行）。")]),t._v(" "),s("p",[t._v("(4) 根据本地事务状态执行Commit或者Rollback（Commit操作生成消息索引，消息对消费者可见）")]),t._v(" "),s("h4",{attrs:{id:"_2-事务补偿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-事务补偿"}},[t._v("#")]),t._v(" 2）事务补偿")]),t._v(" "),s("p",[t._v("(1) 对没有Commit/Rollback的事务消息（pending状态的消息），从服务端发起一次“回查”")]),t._v(" "),s("p",[t._v("(2) Producer收到回查消息，检查回查消息对应的本地事务的状态")]),t._v(" "),s("p",[t._v("(3) 根据本地事务状态，重新Commit或者Rollback")]),t._v(" "),s("p",[t._v("其中，补偿阶段用于解决消息Commit或者Rollback发生超时或者失败的情况。")]),t._v(" "),s("h4",{attrs:{id:"_3-事务消息状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-事务消息状态"}},[t._v("#")]),t._v(" 3）事务消息状态")]),t._v(" "),s("p",[t._v("事务消息共有三种状态，提交状态、回滚状态、中间状态：")]),t._v(" "),s("ul",[s("li",[t._v("TransactionStatus.CommitTransaction: 提交事务，它允许消费者消费此消息。")]),t._v(" "),s("li",[t._v("TransactionStatus.RollbackTransaction: 回滚事务，它代表该消息将被删除，不允许被消费。")]),t._v(" "),s("li",[t._v("TransactionStatus.Unknown: 中间状态，它代表需要检查消息队列来确定状态。")])]),t._v(" "),s("p",[t._v("###4.6.1 发送事务消息")]),t._v(" "),s("h4",{attrs:{id:"_1-创建事务性生产者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建事务性生产者"}},[t._v("#")]),t._v(" 1) 创建事务性生产者")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("TransactionMQProducer")]),t._v("类创建生产者，并指定唯一的 "),s("code",[t._v("ProducerGroup")]),t._v("，就可以设置自定义线程池来处理这些检查请求。执行本地事务后、需要根据执行结果对消息队列进行回复。回传的事务状态在请参考前一节。")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Producer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MQClientException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建事务监听器")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionListener")]),t._v(" transactionListener "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionListenerImpl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建消息生产者")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionMQProducer")]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionMQProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNamesrvAddr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.25.135:9876;192.168.25.138:9876"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//生产者这是监听器")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTransactionListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("transactionListener"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//启动消息生产者")]),t._v("\n        producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" tags "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagB"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TransactionTopic"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"KEY"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello RocketMQ "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemotingHelper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_CHARSET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SendResult")]),t._v(" sendResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessageInTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s%n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sendResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SECONDS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MQClientException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnsupportedEncodingException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//producer.shutdown();")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br")])]),s("h4",{attrs:{id:"_2-实现事务的监听接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-实现事务的监听接口"}},[t._v("#")]),t._v(" 2）实现事务的监听接口")]),t._v(" "),s("p",[t._v("当发送半消息成功时，我们使用 "),s("code",[t._v("executeLocalTransaction")]),t._v(" 方法来执行本地事务。它返回前一节中提到的三个事务状态之一。"),s("code",[t._v("checkLocalTranscation")]),t._v(" 方法用于检查本地事务状态，并回应消息队列的检查请求。它也是返回前一节中提到的三个事务状态之一。")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionListenerImpl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionListener")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocalTransactionState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeLocalTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Message")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" arg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"执行本地事务"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTags")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocalTransactionState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMIT_MESSAGE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TagB"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTags")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocalTransactionState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ROLLBACK_MESSAGE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocalTransactionState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNKNOW")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocalTransactionState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkLocalTransaction")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageExt")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MQ检查消息Tag【"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTags")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"】的本地事务执行结果"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocalTransactionState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMIT_MESSAGE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h3",{attrs:{id:"_4-6-2-使用限制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-2-使用限制"}},[t._v("#")]),t._v(" 4.6.2 使用限制")]),t._v(" "),s("ol",[s("li",[t._v("事务消息不支持延时消息和批量消息。")]),t._v(" "),s("li",[t._v("为了避免单个消息被检查太多次而导致半队列消息累积，我们默认将单个消息的检查次数限制为 15 次，但是用户可以通过 Broker 配置文件的 "),s("code",[t._v("transactionCheckMax")]),t._v("参数来修改此限制。如果已经检查某条消息超过 N 次的话（ N = "),s("code",[t._v("transactionCheckMax")]),t._v(" ） 则 Broker 将丢弃此消息，并在默认情况下同时打印错误日志。用户可以通过重写 "),s("code",[t._v("AbstractTransactionCheckListener")]),t._v(" 类来修改这个行为。")]),t._v(" "),s("li",[t._v("事务消息将在 Broker 配置文件中的参数 transactionMsgTimeout 这样的特定时间长度之后被检查。当发送事务消息时，用户还可以通过设置用户属性 CHECK_IMMUNITY_TIME_IN_SECONDS 来改变这个限制，该参数优先于 "),s("code",[t._v("transactionMsgTimeout")]),t._v(" 参数。")]),t._v(" "),s("li",[t._v("事务性消息可能不止一次被检查或消费。")]),t._v(" "),s("li",[t._v("提交给用户的目标主题消息可能会失败，目前这依日志的记录而定。它的高可用性通过 RocketMQ 本身的高可用性机制来保证，如果希望确保事务消息不丢失、并且事务完整性得到保证，建议使用同步的双重写入机制。")]),t._v(" "),s("li",[t._v("事务消息的生产者 ID 不能与其他类型消息的生产者 ID 共享。与其他类型的消息不同，事务消息允许反向查询、MQ服务器能通过它们的生产者 ID 查询到消费者。")])])])}),[],!1,null,null,null);s.default=e.exports},369:function(t,s,a){t.exports=a.p+"assets/img/RocketMQ角色.7e96f927.jpg"},972:function(t,s,a){t.exports=a.p+"assets/img/queue1.d24b6ee6.png"},973:function(t,s,a){t.exports=a.p+"assets/img/解耦1.7dac27ac.png"},974:function(t,s,a){t.exports=a.p+"assets/img/解耦2.61bd6fea.png"},975:function(t,s){t.exports="data:image/png;base64,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wCXR6wGAaBYOh1VaWqqSkhKVlJSouLhY+/fv1znnnKN+/fpVr/ePf/xDo0aNUtOmTauXffDBB/r666912223eTE6cEaIA+LOp59+qjvvvFN33323rrnmmurlBw4c0NSpU1VWVqaysjIdPnxY5eXlSktLU9OmTdW4cWM1adJEzZo1U69evaq/b8eOHXr99df1s5/9rMbtnHfeefrTn/6kvn37yu/3R2z/gNpAHBB3srOz1bZtW2VnZ9eIQ5MmTTRjxgylpKSoUaNGWrRokV599VXdd9996tOnjyTpm2++UTAYVOvWrau/77XXXtPkyZOVlJSkESNGSJKCwaDC4bCSkpI0bdq06nXvv/9+XXzxxRHaUwCIYj6fz/p8PhsNSkpKbL9+/ezKlStt79697ZdffulaZ/v27Xbq1Kn2oYcessXFxdXLs7Oz7SWXXGJnz55dvWz37t123LhxtqKiwr788sv2wIED1lprZ8yYYSdNmmSDwaC11lb/HQ2q/nt4/f8FohtPSCOuLFy4UJ06ddKAAQPUp08fZWdn1/j6o48+qquuukqVlZUqLy/X/fffr5tuukljx47VwoUL9cILL2jChAnV6z/55JO65ZZbtG3bNi1YsEBnnXWWAoGAPv74Yz344INKSEhQcXGxbrjhBgWDwUjvLvCDcVoJcSU7O1ujR4+WJI0ePVpPPvmk7rzzTiUmfvtP4ZJLLlHfvn3VpEkThUIhvf3229q7d6/uuecepaWl6b///a86dOgg6dsnqzdt2qTt27dr9+7deumll3Tw4EH97ne/0x/+8Aede+65stYqJSVFzZo106xZs3T99dd7tu/A6eDIAXFj+/bt2rJli0aOHClJysrKUnl5uZYvX169Tq9evdS9e3d98sknevLJJ5WZmalZs2Zp8ODBSktL0+9//3vNmTNHkuQ4jhYsWKBJkybp5z//uS666CI99dRTSktL04wZM3TxxRcrKytLP/nJT1RYWKhXXnlFxcXFnuw7cLo4ckDceO+992St1fjx46uXVVRUKDs7W0OGDJEkTZs2TYsWLVJqaqp69OihuXPnatasWSotLVV5ebkqKir0xBNPKD8/X3fccYdWrlypN998U9OmTVN2dramTZum1NRU9e/fXytXrpTjOOrTp4/eeustffHFF0pPT/do74HTQxwQF0KhkBYuXKi7775bmZmZ1cvX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"},976:function(t,s,a){t.exports=a.p+"assets/img/mq-6.0a89da63.png"},977:function(t,s,a){t.exports=a.p+"assets/img/mq-1.29f2e256.png"},978:function(t,s,a){t.exports=a.p+"assets/img/mq-2.954f1d7f.png"},979:function(t,s,a){t.exports=a.p+"assets/img/MQ比较.bd4ee29e.png"},980:function(t,s,a){t.exports=a.p+"assets/img/RocketMQ集群.5ed4beac.png"},981:function(t,s){t.exports="data:image/png;base64,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"},982:function(t,s,a){t.exports=a.p+"assets/img/rocketmq-console.5d733dfc.png"},983:function(t,s,a){t.exports=a.p+"assets/img/rocketmq-console2.e229f44a.png"},984:function(t,s,a){t.exports=a.p+"assets/img/rocketmq-console3.eec734bf.png"},985:function(t,s,a){t.exports=a.p+"assets/img/事务消息.4dfdf7d9.png"}}]);