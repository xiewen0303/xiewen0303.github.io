<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis缓存三大问题 | 谢稳的个人博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo2.png">
    <script type="text/javascript" src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="/js/visitor.js"></script>
    <link rel="stylesheet" href="/iconfont/font_20csbaofexh/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_cs5v8kb16mu/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_rb2ra212g7/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_tufiudzw9qd/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_a7q92la1f6s/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_zre4efrva2s/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_qw4wryn6ml/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_871awunxhy/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_y9b41xpetef/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_mo5yyv3yprm/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_zmhzcngpk2/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_j67xetcspme/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_2tttlrelpoh/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_c103gbzvyng/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_iju5isejpxc/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_3nnhx9n8ea/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_6oyf4j0cvmu/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_tmecser0ml/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_o3x7o929hi/iconfont.css">
    <meta name="description" content="描述">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.350c6f84.css" as="style"><link rel="preload" href="/assets/js/app.66712d02.js" as="script"><link rel="preload" href="/assets/js/11.42113752.js" as="script"><link rel="preload" href="/assets/js/1.dd01b019.js" as="script"><link rel="preload" href="/assets/js/45.68c53edb.js" as="script"><link rel="preload" href="/assets/js/49.36f82c23.js" as="script"><link rel="prefetch" href="/assets/js/10.b4c877fc.js"><link rel="prefetch" href="/assets/js/100.f54625a3.js"><link rel="prefetch" href="/assets/js/101.d9380148.js"><link rel="prefetch" href="/assets/js/102.968961de.js"><link rel="prefetch" href="/assets/js/103.88dd396f.js"><link rel="prefetch" href="/assets/js/104.64860067.js"><link rel="prefetch" href="/assets/js/105.617b71ee.js"><link rel="prefetch" href="/assets/js/106.fd078911.js"><link rel="prefetch" href="/assets/js/107.880e80ef.js"><link rel="prefetch" href="/assets/js/108.f340515d.js"><link rel="prefetch" href="/assets/js/109.15f4d5e8.js"><link rel="prefetch" href="/assets/js/110.84d47373.js"><link rel="prefetch" href="/assets/js/111.7d04f087.js"><link rel="prefetch" href="/assets/js/112.95952375.js"><link rel="prefetch" href="/assets/js/113.97e50938.js"><link rel="prefetch" href="/assets/js/114.84185c2f.js"><link rel="prefetch" href="/assets/js/115.19bbf0d5.js"><link rel="prefetch" href="/assets/js/116.4c229dff.js"><link rel="prefetch" href="/assets/js/117.c50c4f7f.js"><link rel="prefetch" href="/assets/js/118.ce66f0c4.js"><link rel="prefetch" href="/assets/js/119.fcacce08.js"><link rel="prefetch" href="/assets/js/12.b9bcfa42.js"><link rel="prefetch" href="/assets/js/120.ef883575.js"><link rel="prefetch" href="/assets/js/121.d53777f4.js"><link rel="prefetch" href="/assets/js/122.3390b5f4.js"><link rel="prefetch" href="/assets/js/123.3e7ab0a3.js"><link rel="prefetch" href="/assets/js/124.db3eca6a.js"><link rel="prefetch" href="/assets/js/125.12565777.js"><link rel="prefetch" href="/assets/js/126.9f2e5bca.js"><link rel="prefetch" href="/assets/js/127.c09d96f2.js"><link rel="prefetch" href="/assets/js/128.ccd81962.js"><link rel="prefetch" href="/assets/js/129.d79dfe2f.js"><link rel="prefetch" href="/assets/js/13.d1b0070c.js"><link rel="prefetch" href="/assets/js/130.02cd264e.js"><link rel="prefetch" href="/assets/js/131.2baf58a9.js"><link rel="prefetch" href="/assets/js/132.84d3b67d.js"><link rel="prefetch" href="/assets/js/133.ee09fef1.js"><link rel="prefetch" href="/assets/js/134.c7978654.js"><link rel="prefetch" href="/assets/js/135.5cfc0097.js"><link rel="prefetch" href="/assets/js/136.a7530282.js"><link rel="prefetch" href="/assets/js/137.22042d1e.js"><link rel="prefetch" href="/assets/js/138.8bfe7e0f.js"><link rel="prefetch" href="/assets/js/139.0dedb9a8.js"><link rel="prefetch" href="/assets/js/14.8600fc68.js"><link rel="prefetch" href="/assets/js/140.ffd60cf4.js"><link rel="prefetch" href="/assets/js/141.be5ecf0c.js"><link rel="prefetch" href="/assets/js/142.81fcc4e7.js"><link rel="prefetch" href="/assets/js/143.b8e18676.js"><link rel="prefetch" href="/assets/js/144.7db33328.js"><link rel="prefetch" href="/assets/js/145.52165f2b.js"><link rel="prefetch" href="/assets/js/146.51bee06c.js"><link rel="prefetch" href="/assets/js/147.ea98eb05.js"><link rel="prefetch" href="/assets/js/148.125b1418.js"><link rel="prefetch" href="/assets/js/149.60999209.js"><link rel="prefetch" href="/assets/js/15.e7f36ac9.js"><link rel="prefetch" href="/assets/js/150.5f4687e0.js"><link rel="prefetch" href="/assets/js/151.4fb57e58.js"><link rel="prefetch" href="/assets/js/152.0b3f8d6e.js"><link rel="prefetch" href="/assets/js/153.590f7f66.js"><link rel="prefetch" href="/assets/js/154.7c50827e.js"><link rel="prefetch" href="/assets/js/155.f16146cd.js"><link rel="prefetch" href="/assets/js/156.e4eb9f2b.js"><link rel="prefetch" href="/assets/js/157.71be4e5a.js"><link rel="prefetch" href="/assets/js/158.f8226894.js"><link rel="prefetch" href="/assets/js/159.23e0f7d3.js"><link rel="prefetch" href="/assets/js/16.9088887c.js"><link rel="prefetch" href="/assets/js/160.adadc3c2.js"><link rel="prefetch" href="/assets/js/161.4b7917ea.js"><link rel="prefetch" href="/assets/js/162.217ce512.js"><link rel="prefetch" href="/assets/js/163.10cee4f1.js"><link rel="prefetch" href="/assets/js/164.4ad5170f.js"><link rel="prefetch" href="/assets/js/165.d9c4eb2f.js"><link rel="prefetch" href="/assets/js/166.5abfdb3c.js"><link rel="prefetch" href="/assets/js/167.d8036606.js"><link rel="prefetch" href="/assets/js/168.39d0f7a2.js"><link rel="prefetch" href="/assets/js/169.28dcef97.js"><link rel="prefetch" href="/assets/js/17.55d1a373.js"><link rel="prefetch" href="/assets/js/170.1904cc3c.js"><link rel="prefetch" href="/assets/js/171.25c0c843.js"><link rel="prefetch" href="/assets/js/172.bc0ff95a.js"><link rel="prefetch" href="/assets/js/173.1fd038a7.js"><link rel="prefetch" href="/assets/js/174.ff8cd66a.js"><link rel="prefetch" href="/assets/js/175.819ad242.js"><link rel="prefetch" href="/assets/js/18.ce5c67f1.js"><link rel="prefetch" href="/assets/js/19.4ded1f11.js"><link rel="prefetch" href="/assets/js/20.074ba45e.js"><link rel="prefetch" href="/assets/js/21.f0afcbf5.js"><link rel="prefetch" href="/assets/js/22.24526a64.js"><link rel="prefetch" href="/assets/js/23.5767a1dc.js"><link rel="prefetch" href="/assets/js/24.ed944a1b.js"><link rel="prefetch" href="/assets/js/25.c9237e9f.js"><link rel="prefetch" href="/assets/js/26.24c8333e.js"><link rel="prefetch" href="/assets/js/27.fcf23e69.js"><link rel="prefetch" href="/assets/js/28.13fea098.js"><link rel="prefetch" href="/assets/js/29.8fe770f1.js"><link rel="prefetch" href="/assets/js/3.5545542d.js"><link rel="prefetch" href="/assets/js/30.5b039abb.js"><link rel="prefetch" href="/assets/js/31.e1fe50c8.js"><link rel="prefetch" href="/assets/js/32.235a1916.js"><link rel="prefetch" href="/assets/js/33.9f922802.js"><link rel="prefetch" href="/assets/js/34.c1827c5d.js"><link rel="prefetch" href="/assets/js/35.f7642664.js"><link rel="prefetch" href="/assets/js/36.34ff0660.js"><link rel="prefetch" href="/assets/js/37.eeac5e1e.js"><link rel="prefetch" href="/assets/js/38.d1e718a5.js"><link rel="prefetch" href="/assets/js/39.b35a797e.js"><link rel="prefetch" href="/assets/js/4.7af7de0a.js"><link rel="prefetch" href="/assets/js/40.fd584b6b.js"><link rel="prefetch" href="/assets/js/41.5225513f.js"><link rel="prefetch" href="/assets/js/42.6cfd6220.js"><link rel="prefetch" href="/assets/js/43.25342211.js"><link rel="prefetch" href="/assets/js/44.ef0a25bd.js"><link rel="prefetch" href="/assets/js/46.8f31cde6.js"><link rel="prefetch" href="/assets/js/47.caedb210.js"><link rel="prefetch" href="/assets/js/48.e0ac851e.js"><link rel="prefetch" href="/assets/js/5.d553fe1c.js"><link rel="prefetch" href="/assets/js/50.611e5a4b.js"><link rel="prefetch" href="/assets/js/51.4f9f3f6d.js"><link rel="prefetch" href="/assets/js/52.c39f14d5.js"><link rel="prefetch" href="/assets/js/53.6100105a.js"><link rel="prefetch" href="/assets/js/54.e0a02f1a.js"><link rel="prefetch" href="/assets/js/55.9722b08b.js"><link rel="prefetch" href="/assets/js/56.334a361d.js"><link rel="prefetch" href="/assets/js/57.c4782794.js"><link rel="prefetch" href="/assets/js/58.5df1eae4.js"><link rel="prefetch" href="/assets/js/59.bd3f5fd2.js"><link rel="prefetch" href="/assets/js/6.3ebd012a.js"><link rel="prefetch" href="/assets/js/60.f8194307.js"><link rel="prefetch" href="/assets/js/61.9375aaad.js"><link rel="prefetch" href="/assets/js/62.c34e3455.js"><link rel="prefetch" href="/assets/js/63.14829835.js"><link rel="prefetch" href="/assets/js/64.48f8650b.js"><link rel="prefetch" href="/assets/js/65.e812686e.js"><link rel="prefetch" href="/assets/js/66.0c93b50a.js"><link rel="prefetch" href="/assets/js/67.a9675320.js"><link rel="prefetch" href="/assets/js/68.6bf78f24.js"><link rel="prefetch" href="/assets/js/69.7ef082ff.js"><link rel="prefetch" href="/assets/js/7.639ea18e.js"><link rel="prefetch" href="/assets/js/70.4e03679a.js"><link rel="prefetch" href="/assets/js/71.4f17504f.js"><link rel="prefetch" href="/assets/js/72.74c28698.js"><link rel="prefetch" href="/assets/js/73.14894cf8.js"><link rel="prefetch" href="/assets/js/74.9654a45c.js"><link rel="prefetch" href="/assets/js/75.f2e4f3bd.js"><link rel="prefetch" href="/assets/js/76.0337b039.js"><link rel="prefetch" href="/assets/js/77.12e176b5.js"><link rel="prefetch" href="/assets/js/78.0b1a720d.js"><link rel="prefetch" href="/assets/js/79.99b02597.js"><link rel="prefetch" href="/assets/js/8.decb7721.js"><link rel="prefetch" href="/assets/js/80.efeb98f6.js"><link rel="prefetch" href="/assets/js/81.9f377f24.js"><link rel="prefetch" href="/assets/js/82.5537e285.js"><link rel="prefetch" href="/assets/js/83.282c845e.js"><link rel="prefetch" href="/assets/js/84.94111c71.js"><link rel="prefetch" href="/assets/js/85.9243f917.js"><link rel="prefetch" href="/assets/js/86.4d8485e2.js"><link rel="prefetch" href="/assets/js/87.2a6643f4.js"><link rel="prefetch" href="/assets/js/88.33508e76.js"><link rel="prefetch" href="/assets/js/89.02ef538c.js"><link rel="prefetch" href="/assets/js/9.c45915be.js"><link rel="prefetch" href="/assets/js/90.75b8945f.js"><link rel="prefetch" href="/assets/js/91.8d60519a.js"><link rel="prefetch" href="/assets/js/92.9251c3cd.js"><link rel="prefetch" href="/assets/js/93.0040bcf0.js"><link rel="prefetch" href="/assets/js/94.4638f28f.js"><link rel="prefetch" href="/assets/js/95.2107de61.js"><link rel="prefetch" href="/assets/js/96.85c2dcbf.js"><link rel="prefetch" href="/assets/js/97.663fb4f9.js"><link rel="prefetch" href="/assets/js/98.32cd8ee5.js"><link rel="prefetch" href="/assets/js/99.4083605b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.350c6f84.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>谢稳的个人博客</h3> <p class="description" data-v-59e6cb88>描述</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>xiewen</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo2.png" alt="谢稳的个人博客" class="logo"> <span class="site-name">谢稳的个人博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-cafei"></i>
      Java
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/java开发技巧/其他/语法糖.html" class="nav-link"><i class="iconfont icon-LBhouduanfuwuzu"></i>
  java开发技巧
</a></li><li class="dropdown-item"><!----> <a href="/Java/JVM性能调优/JVM概念/0_JVM体系结构.html" class="nav-link"><i class="iconfont icon-duozhongzhifu"></i>
  JVM性能调优
</a></li><li class="dropdown-item"><!----> <a href="/Java/并发编程/JUC.html" class="nav-link"><i class="iconfont icon-bingfashuliang"></i>
  并发编程
</a></li><li class="dropdown-item"><!----> <a href="/Java/容器/Docker/0_Docker介绍及使用.html" class="nav-link"><i class="iconfont icon-rongqi"></i>
  容器相关
</a></li><li class="dropdown-item"><!----> <a href="/Java/设计模式/1基本概念/设计模式.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/Java/微服务专栏/流控组件Sentinel/微服务保护.html" class="nav-link"><i class="iconfont icon-mseweifuwuyinqing"></i>
  微服务专栏
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式事务/分布式事务Seata.html" class="nav-link"><i class="iconfont icon-jiagou"></i>
  架构设计
</a></li><li class="dropdown-item"><!----> <a href="/Java/数据结构/排序算法.html" class="nav-link"><i class="iconfont icon-shujujiegou"></i>
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/数据库/MongoDB/0_MongoDB简介.html" class="nav-link"><i class="iconfont icon-shujuku"></i>
  数据库
</a></div><div class="nav-item"><a href="/Redis/Redis解决限流问题.html" class="nav-link"><i class="iconfont icon-redis"></i>
  Redis专栏
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-zuzhijiagou"></i>
      常用框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/常用框架/Spring/Spring容器初始化源码解析.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Mybatis/Mybatis-Plus-Join连表查询.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch01.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  搜索引擎ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Activiti7/Activiti整合Spring.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  工作流引擎Activiti7
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式监控/SpringBootAdmin.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  SpringBootAdmin
</a></li></ul></div></div><div class="nav-item"><a href="/Linux/0_Linux常用命令.html" class="nav-link"><i class="iconfont icon-centos"></i>
  Linux
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/logo2.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    xiewen
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>132</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>57</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-cafei"></i>
      Java
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/java开发技巧/其他/语法糖.html" class="nav-link"><i class="iconfont icon-LBhouduanfuwuzu"></i>
  java开发技巧
</a></li><li class="dropdown-item"><!----> <a href="/Java/JVM性能调优/JVM概念/0_JVM体系结构.html" class="nav-link"><i class="iconfont icon-duozhongzhifu"></i>
  JVM性能调优
</a></li><li class="dropdown-item"><!----> <a href="/Java/并发编程/JUC.html" class="nav-link"><i class="iconfont icon-bingfashuliang"></i>
  并发编程
</a></li><li class="dropdown-item"><!----> <a href="/Java/容器/Docker/0_Docker介绍及使用.html" class="nav-link"><i class="iconfont icon-rongqi"></i>
  容器相关
</a></li><li class="dropdown-item"><!----> <a href="/Java/设计模式/1基本概念/设计模式.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/Java/微服务专栏/流控组件Sentinel/微服务保护.html" class="nav-link"><i class="iconfont icon-mseweifuwuyinqing"></i>
  微服务专栏
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式事务/分布式事务Seata.html" class="nav-link"><i class="iconfont icon-jiagou"></i>
  架构设计
</a></li><li class="dropdown-item"><!----> <a href="/Java/数据结构/排序算法.html" class="nav-link"><i class="iconfont icon-shujujiegou"></i>
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/数据库/MongoDB/0_MongoDB简介.html" class="nav-link"><i class="iconfont icon-shujuku"></i>
  数据库
</a></div><div class="nav-item"><a href="/Redis/Redis解决限流问题.html" class="nav-link"><i class="iconfont icon-redis"></i>
  Redis专栏
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-zuzhijiagou"></i>
      常用框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/常用框架/Spring/Spring容器初始化源码解析.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Mybatis/Mybatis-Plus-Join连表查询.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch01.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  搜索引擎ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Activiti7/Activiti整合Spring.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  工作流引擎Activiti7
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式监控/SpringBootAdmin.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  SpringBootAdmin
</a></li></ul></div></div><div class="nav-item"><a href="/Linux/0_Linux常用命令.html" class="nav-link"><i class="iconfont icon-centos"></i>
  Linux
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Redis/1_Redis缓存三大问题.html" class="active sidebar-link">Redis缓存三大问题</a></li><li><a href="/Redis/2_Redis解决超卖问题.html" class="sidebar-link">Redis 解决超卖问题</a></li><li><a href="/Redis/3_Redis解决限流问题.html" class="sidebar-link">Redis解决限流问题</a></li><li><a href="/Redis/4_springboot整合Redisson.html" class="sidebar-link">springboot整合Redisson</a></li><li><a href="/Redis/5_Redis延迟队列.html" class="sidebar-link">Redis延迟队列</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Redis缓存三大问题</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>xiewen</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Redis缓存三大问题</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>xiewen</span></i> <!----> <i class="iconfont reco-eye" data-v-8a445198><span id="/Redis/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Redis</span></i></div></div> <div class="theme-reco-content content__default"><p>Redis是我们日常在工作中使用非常多的缓存解决手段，使用缓存，能够提升我们应用程序的性能，同时极大程度的降低数据库的压力。但如果使用不当，同样会造成许多问题，其中三大经典问题就包括了缓存穿透、缓存击穿和缓存雪崩。</p> <h3 id="缓存穿透"><a href="#缓存穿透" class="header-anchor">#</a> 缓存穿透</h3> <p>缓存穿透是指用户在查找一个数据时查找了一个根本不存在的数据。按照缓存设计流程，首先查询redis缓存，发现并没有这条数据，于是直接查询数据库，发现也没有，于是本次查询结果以失败告终。</p> <p>当存在大量的这种请求或恶意使用不存在的数据进行访问攻击时，大量的请求将直接访问数据库，造成数据库压力甚至可能直接瘫痪。以电商商城为例，以商品id进行商品查询，这时如果使用一个不存在的id进行攻击，每次的攻击都将访问在数据库上。</p> <p>来看一下应对方案：</p> <h4 id="_1、缓存空对象"><a href="#_1、缓存空对象" class="header-anchor">#</a> 1、缓存空对象</h4> <p>修改数据库写回缓存逻辑，对于缓存中不存在，数据库中也不存在的数据，我们仍然将其缓存起来，并且设置一个缓存过期时间。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p>如上图所示，查询数据库失败时，仍以查询的key值缓存一个空对象（key，null）。</p> <p>但是这么做仍然存在不少问题：</p> <p>a、这时在缓存中查找这个key值时，会返回一个null的空对象。需要注意的是这个空对象可能并不是客户端需要的，所以需要对结果为空进行处理后，再返回给客户端。</p> <p>b、占用redis中大量内存。因为空对象能够被缓存，redis会使用大量的内存来存储这些值为空的key。</p> <p>c、如果在写缓存后数据库中存入的这个key的数据，由于缓存没有过期，取到的仍为空值，所以可能出现短暂的数据不一致问题。</p> <h4 id="_2、布隆过滤器"><a href="#_2、布隆过滤器" class="header-anchor">#</a> 2、布隆过滤器</h4> <p>布隆过滤器是一个二进制向量，或者说二进制的数组，或者说是位（bit）数组。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkIAAABSCAYAAAC47ruyAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAbUSURBVHhe7duxjZRXHEVxWloaICZBRHSwESXQAD1QAY1QATHZihyJBITGvvaOja2xdN9j+fB78zvSX9odWIlzvgmuBnh0+o5Pnz7dfzXOr/rZu7u7+6/G4dvDt4dvD98evj18e/ieTobQJHx7+Pbw7eHbw7eHb88uvobQJHx7+Pbw7eHbw7eHb88uvobQJHx7+Pbw7eHbw7eHb88uvobQJHx7+Pbw7eHbw7eHb88uvobQJHx7+Pbw7eHbw7eHb88uvo8icr78hu+/H7lf9bM/cnz749sf32OOb398++N7zP2ffH0iNAnfHr49fHv49vDt4duzi68hNAnfHr49fHv49vDt4duzi68hNAnfHr49fHv49vDt4duzi68hNAnfHr49fHv49vDt4duzi68hNAnfHr49fHv49vDt4duzi68hNAnfHr49fHv49vDt4duzi68hNAnfHr49fHv49vDt4duzi68hNAnfHs+3h28P3x6+PXx7dvE1hCbh28O3h28P3x6+PXx7dvE9dAjd3t6eHj9+fNV3c3Nz8fVrOg00ON+1d/A+0CCnwZ+XjdCw9BC6JO6cc845l2vYYghdMxpoEDTQIGigQdBgrIEhtDgaaBA00CBooEHQYKyBIbQ4GmgQNNAgaKBB0GCswYMPobx41HnY3vBBAw2CBhoEDTQI5waXtsPPPp8IHYwGGgQNNAgaaBA0GGvw0FvFEDoYDTQIGmgQNNAgaDDWwBBaHA00CBpoEDTQIGgw1sAQWhwNNAgaaBA00CBoMNbAEFocDTQIGmgQNNAgaDDWwBBaHA00CBpoEDTQIGgw1sAQWhwNNAgaaBA00CBoMNbAEFocDTQIGmgQNNAgaDDWwBBaHA00CBpoEDTQIGgw1sAQWhwNNAgaaBA00CBoMNbAEFocDTQIGmgQNNAgaDDWwBBaHA00CBpoEDTQIGgw1sAQWhwNNAgaaBA00CBoMNbAEFocDTQIGmgQNNAgaDDW4MGHUF486n71w37z5s1ff4aXL1+evnz5cv8rx6GBBkEDDYIGGgQN/m5waTv87LuaT4TyoM8P+Nu3b6dXr16dXr9+ff+rx6GBBkEDDYIGGgQNxho89Fa5iiH09evX04sXL04fPny4f+V0+vjx4+nZs2enz58/379yDBpoEDTQIGigQdBgrIEhNMH79+9PT548+ceDzRvg+fPnp3fv3t2/cgwaaBA00CBooEHQYKyBITRBHvb5o78z1/iG10ADDTQIGmgQVm1gCE1w6WGf/y70mt/wGmgQNNAgaKBBWKGBITRBHvalj//+/XejR6CBBkEDDYIGGgQNxhoYQhPkH389ffr0Hw/22v5RnAYaBA00CBpoEFZtYAhNkv8ieP4vgeeP/t6+ffvH90eigQZBAw2CBhoEDcYaGEKTnB/w+c9wfvBHo4EGQQMNggYaBA3GGhhCi6OBBkEDDYIGGgQNxhoYQoujgQZBAw2CBhoEDcYaGEKLo4EGQQMNggYaBA3GGhhCi6OBBkEDDYIGGgQNxhoYQoujgQZBAw2CBhoEDcYaPPgQyotHnYftDR800CBooEHQQINwbnBpO/zs84nQwWigQdBAg6CBBkGDsQYPvVUMoYPRQIOggQZBAw2CBmMNDKHF0UCDoIEGQQMNggZjDQyhxdFAg6CBBkEDDYIGYw0MocXRQIOggQZBAw2CBmMNDKHF0UCDoIEGQQMNggZjDQyhxdFAg6CBBkEDDYIGYw0MocXRQIOggQZBAw2CBmMNDKHF0UCDoIEGQQMNggZjDQyhxdFAg6CBBkEDDYIGYw0MocXRQIOggQZBAw2CBmMNthhCzjnnnHP/voalh9Dt7e1F8Wu6m5ubi69f02mgwfmuvYP3gQY5Df68bISGpYfQf/EjP3t3d3f/1Th8e/j28O3h28O3h28P39+HUETOl9/w/fcj96t+9keOb398++N7zPHtj29/fI+5/5OvT4Qm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxNYQm4dvDt4dvD98evj18e3bxfZQXV748iEuv73p89z6+ex/fvY/vivfp9BuUlxkyNcOijgAAAABJRU5ErkJggg==" alt="img"></p> <p>因为是二进制的向量，它的每一位只能存放0或者1。当需要向布隆过滤器中添加一个数据映射时，添加的并不是原始的数据，而是使用多个不同的哈希函数生成多个哈希值，并将每个生成哈希值指向的下标位置置为1。所以，别再说从布隆过滤器中取数据啦，我们根本就没有存原始数据。</p> <p><img src="data:image/png;base64,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o839u2HDhlTnueeem352YDz7bNy4sTCeQnECTBv19q1/0esTW5fQEgl6fdqiVxfNXn311enj3fMHFF2Uqhfvvfrqq9mag2lz/5544ompZoU2F8azT/57p5uBOeWUU6Y8v0e0Xe+ooNenT3oJLZGg16fJevV8jTvuuCM588wzCwcOnf758pe/PPLdP6Kt/aun8kq73jM0aCapDOPZp/y98llh+Oabby6MPxW9VkB3pen9U6ILekcBvT590ktoiQS9Pk3Uq4e/6ZH6+YPEvHnz0lNCDz30UPLPf/4zW3N02tq/F110UeqDrtUZBcazz6DvVYDZs2dPehFv+RZqBRg97ycEmFFpot5hdK1/h4FejzmqWHeRaVXLu1rQW0/57W9/m6xbty59hH7+gKBnatxwww2VdWJKG/t3+/bt6TuG5IcOjFXrTFcYz+MpeljhN77xjSnXVYUAo1vTq+od7EL/dru0TS8zLZGg16dOvbt27Uq2bNmSfOQjHyns+PXU2i9+8YvJ888/n61dpK16Y7nqqqtSXzTTNCqMZ5+Y79UMjG6nny7A6Jb7Yacx26Q30Jf+DaDXg9ASCXp9ZluvdvK//vWv0xf95XfwehDcBRdckGzdujVbc3r61r9HHnlk6tEjjzySLfFhPPvMtM0hwOhlm6MEmLbqjQW9Pm3TS2iJBL0+s6VXsya6pTQcgEM57bTTku9+97vZWh596t/NmzenPp188snpQXFUGM8+B7PNeunmiy++mL4uonwNjF4j8fGPf3ziLqQu6B0F9Pq0TS+hJRL0+oxTr/7qvO+++ybelRPKsccem3z2s59N/v73v2drjkaf+ld/ncszvUMpBsazz7jaPCzALF++vPI2agf61we9PrF1CS2RoNfnYOvVe31+97vfTbn7R9PjunZFdwYJ+nc4eqmfvNOps0FvJx4E49lnNto8KMDo5Y5nnXWW/bRjQf/6oNcnti6hJRL0+hwMvTptodM/N910UzJ//vyJnbDueDnppJOS9evXp+vlabPeGGLqfv7zn099vPzyy7Mlo8N49pntNocAc+2110YHGPrXB70+sXUJLZGg12cmehVUNHPywQ9+sLDD1VNrdfrn5ZdfztacCv07mH//+9/p7JT8fOKJJ7Klo8N49qlTrwLMSy+9lF7Eqzd457enQQGG/vVBr09sXUJLJOj1GVXvvn370vPv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" alt="img"></p> <p>例如&quot;Hydra&quot;的三个哈希函数生成的下标分别为1，3，6，那么将这三位置为1，其他数据以此类推。那么这样的数据结构能够起到什么效果呢？我们可以根据这个位向量，来判断数据是否存在。</p> <p>具体流程：</p> <p>a、计算数据的多个哈希值；</p> <p>b、判断这些bit是否为1，全部为1，则数据可能存在；</p> <p>c、若其中一个或多个bit不为1，则判断数据不存在。</p> <p>需要注意，布隆过滤器是存在误判的，因为随着数据存储量的增加，被置为1的bit数量也会增加，因此，有可能在查询一个并不存在的数据时，碰巧所有bit都已经被其他数据置为了1，也就是发生了哈希碰撞。因此，布隆过滤器只能做到判断数据是否可能存在，不能做到百分百的确定。</p> <p>Google的<code>guava</code>包为我们提供了单机版的布隆过滤器实现，来看一下具体使用</p> <p>首先引入maven依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.google.guava<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>guava<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>27.1-jre<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>向布隆过滤器中模拟传入1000000条数据，给定误判率，再使用不存在的数据进行判断：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BloomTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> dataSize<span class="token punctuation">,</span><span class="token keyword">double</span> errorRate<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BloomFilter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> bloomFilter<span class="token operator">=</span>
                <span class="token class-name">BloomFilter</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Funnels</span><span class="token punctuation">.</span><span class="token function">integerFunnel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dataSize<span class="token punctuation">,</span> errorRate<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> dataSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            bloomFilter<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> errorCount<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> dataSize<span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">*</span> dataSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>bloomFilter<span class="token punctuation">.</span><span class="token function">mightContain</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                errorCount<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Total error count: &quot;</span><span class="token operator">+</span>errorCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BloomTest</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BloomTest</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span><span class="token number">0.001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>测试结果：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>Total error count: 10314
Total error count: 994
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以看出，在给定误判率为0.01时误判了10314次，在误判率为0.001时误判了994次，大体符合我们的期望。</p> <p>但是因为guava的布隆过滤器是运行在的jvm内存中，所以仅支持单体应用，并不支持微服务分布式。那么有没有支持分布式的布隆过滤器呢，这时Redis站了出来，自己造成的问题自己来解决！</p> <p>Redis的BitMap（位图）支持了对位的操作，通过一个bit位来表示某个元素对应的值或者状态。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>//对key所存储的字符串值，设置或清除指定偏移量上的位（bit）
setbit key offset value
//对key所存储的字符串值，获取指定偏移量上的位（bit）
getbit key offset
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>既然布隆过滤器是对位进行赋值，我们就可以使用BitMap提供的setbit和getbit命令非常简单的对其进行实现，并且setbit操作可以实现自动数组扩容，所以不用担心在使用过程中数组位数不够的情况。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//源码参考https://www.cnblogs.com/CodeBear/p/10911177.html</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisBloomTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> dataSize <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">double</span> errorRate <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>

    <span class="token comment">//bit数组长度</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">long</span> numBits<span class="token punctuation">;</span>
    <span class="token comment">//hash函数数量</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> numHashFunctions<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        numBits <span class="token operator">=</span> <span class="token function">optimalNumOfBits</span><span class="token punctuation">(</span>dataSize<span class="token punctuation">,</span> errorRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        numHashFunctions <span class="token operator">=</span> <span class="token function">optimalNumOfHashFunctions</span><span class="token punctuation">(</span>dataSize<span class="token punctuation">,</span> numBits<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Bits length: &quot;</span><span class="token operator">+</span>numBits<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hash nums: &quot;</span><span class="token operator">+</span>numHashFunctions<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> indexs <span class="token operator">=</span> <span class="token function">getIndexs</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> index <span class="token operator">:</span> indexs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                jedis<span class="token punctuation">.</span><span class="token function">setbit</span><span class="token punctuation">(</span><span class="token string">&quot;bloom&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        num<span class="token operator">:</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> indexs <span class="token operator">=</span> <span class="token function">getIndexs</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> index <span class="token operator">:</span> indexs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Boolean</span> isContain <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">getbit</span><span class="token punctuation">(</span><span class="token string">&quot;bloom&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isContain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">&quot;不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">continue</span>  num<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">&quot;可能存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//根据key获取bitmap下标</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getIndexs</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> hash1 <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> hash2 <span class="token operator">=</span> hash1 <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span>numHashFunctions<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numHashFunctions<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span> combinedHash <span class="token operator">=</span> hash1 <span class="token operator">+</span> i <span class="token operator">*</span> hash2<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>combinedHash <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                combinedHash <span class="token operator">=</span> <span class="token operator">~</span>combinedHash<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> combinedHash <span class="token operator">%</span> numBits<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Charset</span> charset <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Hashing</span><span class="token punctuation">.</span><span class="token function">murmur3_128</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashObject</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token class-name">Funnels</span><span class="token punctuation">.</span><span class="token function">stringFunnel</span><span class="token punctuation">(</span>charset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//计算hash函数个数</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">optimalNumOfHashFunctions</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">,</span> <span class="token keyword">long</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> m <span class="token operator">/</span> n <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//计算bit数组长度</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">long</span> <span class="token function">optimalNumOfBits</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">,</span> <span class="token keyword">double</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            p <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">-</span>n <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><p>基于BitMap实现分布式布隆过滤器的过程中，哈希函数的数量以及位数组的长度都是动态计算的。可以说，给定的容错率越低，哈希函数的个数则越多，数组长度越长，使用的redis内存开销越大。</p> <p>guava中布隆过滤器的数组最大长度是由int值的上限决定的，大概为21亿，而redis的位数组为512MB，也就是2^32位，所以最大长度能够达到42亿，容量为guava的两倍。</p> <h3 id="缓存击穿"><a href="#缓存击穿" class="header-anchor">#</a> 缓存击穿</h3> <p>缓存击穿是指缓存中没有但数据库中有的数据，由于出现大量的并发请求，同时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力。</p> <p>造成这种情况大致有两种情况：</p> <ul><li>第一次查询数据时，没有进行缓存预热，数据并没有加入缓存当中。</li> <li>缓存由于到达过期时间导致失效。</li></ul> <p>解决思路：</p> <ul><li>当缓存不命中时，在查询数据库前使用redis分布式锁，使用查询的key值作为锁条件；</li> <li>获取锁的线程在查询数据库前，再查询一次缓存。这样做是因为高并发请求获取锁的时候造成排队，但第一次进来的线程在查询完数据库后会写入缓存，之后再获得锁的线程直接查询缓存就可以获得数据；</li> <li>读取完数据后释放分布式锁。</li></ul> <p>代码思路：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>public String queryData(String key) throws Exception {
    String data;
    data = queryDataFromRedis(key);// 查询缓存数据
    if (data == null) {
        if(redisLock.tryLock()){//获取分布式锁
            data = queryDataFromRedis(key); // 再次查询缓存
            if (data == null) {
                data = queryDataFromDB(key); // 查询数据库
                writeDataToRedis(data); // 将查询到的数据写入缓存
            }
            redisLock.unlock();//释放分布式锁
        }
    }
    return data;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>具体分布式锁的实现可以使用redis中强大的setnx命令：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>/*
* 加锁
* key-键;value-值
* nxxx-nx(只在key不存在时才可以set)|xx(只在key存在的时候set)
* expx--ex代表秒，px代表毫秒;time-过期时间，单位是expx所代表的单位。
* */
jedis.set(key, value, nxxx, expx, time);

//解锁
jedis.del(key);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>通过在加锁的同时设置过期时间，还可以防止线程挂掉仍然占用锁的情况。</p> <h3 id="缓存雪崩"><a href="#缓存雪崩" class="header-anchor">#</a> 缓存雪崩</h3> <p>缓存雪崩是指缓存中数据大批量到过期时间，引发的大部分缓存突然同时不可用，而查询数据量巨大，引起数据库压力过大甚至宕机的情况。 需要注意缓存击穿和缓存雪崩的不同之处缓存击穿指的是大量的并发请求去查询同一条数据；而缓存雪崩是大量缓存同时过期，导致很多查询请求都查不到缓存数据从而查数据库。</p> <p>解决方案：</p> <ul><li>错开缓存的过期时间，可通过设置缓存数据的过期时间为默认值基础上加上一个随机值，防止同一时间大量数据过期现象发生。</li> <li>搭建高可用的redis集群，避免出现缓存服务器宕机引起的雪崩问题。</li> <li>参照hystrix，进行熔断降级。</li></ul> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结：</h3> <p>随着Redis的使用日渐普及，越来越多的系统开始使用缓存技术，但伴随着便利的同时也因为使用不当造成了很多问题。只有在系统设计时期考虑到这些问题并加以克服，系统才能够更加健壮。</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Redis/2_Redis解决超卖问题.html">
          Redis 解决超卖问题
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-3" data-v-b57cc07c><a href="/Redis/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html#缓存穿透" class="sidebar-link reco-side-缓存穿透" data-v-b57cc07c>缓存穿透</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html#缓存击穿" class="sidebar-link reco-side-缓存击穿" data-v-b57cc07c>缓存击穿</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html#缓存雪崩" class="sidebar-link reco-side-缓存雪崩" data-v-b57cc07c>缓存雪崩</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/1_Redis%E7%BC%93%E5%AD%98%E4%B8%89%E5%A4%A7%E9%97%AE%E9%A2%98.html#总结" class="sidebar-link reco-side-总结" data-v-b57cc07c>总结：</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/bgm/天下.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/logo2.png" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/logo2.png);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>天下</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>张杰</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><!----></div></div>
    <script src="/assets/js/app.66712d02.js" defer></script><script src="/assets/js/11.42113752.js" defer></script><script src="/assets/js/1.dd01b019.js" defer></script><script src="/assets/js/45.68c53edb.js" defer></script><script src="/assets/js/49.36f82c23.js" defer></script>
  </body>
</html>
